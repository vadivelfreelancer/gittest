<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <menuitem id="menu_transactions_all" name="Transactions" parent="accounting_main_menu" sequence="1"/>
        <menuitem id="menu_account_journal_vouchers" name="Vouchers" parent="menu_transactions_all" sequence="1"/>

        <record id="view_journal_voucher_tree" model="ir.ui.view">
            <field name="name">pappaya.journal.voucher.tree</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <tree edit="false">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_journal_voucher_form" model="ir.ui.view">
            <field name="name">pappaya.journal.voucher.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <form string="Journal Voucher">
                    <header>
<!--                        <button name="action_confirm" type="object" string="Confirm" states="draft" class="oe_highlight"/>-->
                        <!--<button name="action_draft" type="object" string="Set To Draft" states="cancel" class="oe_highlight"/>-->
                        <field name="state" widget="statusbar" statusbar_visible="draft,posted"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title" attrs="{'invisible': [('state', '=', 'draft')]}">-->
                            <!--<h1><field name="name"/></h1>-->
                        <!--</div>-->
                        <group>
                            <group>
                                <field name="branch" required="1" attrs="{'readonly': [('state','=', 'posted')]}"/>
                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': [('state','=', 'posted')]}"/>
                                <field name="type" readonly="1" invisible="1"/>
                            </group>
                        </group>
                            <group string="Debit">
                                <field name="voucher_debits" nolabel="1" attrs="{'readonly': [('state','=', 'posted')]}">
                                    <tree editable="bottom">
                                        <!--<field name="name"/>-->
                                        <field name="type" invisible="1"/>
                                        <field name="account_id" domain="[('internal_type', '!=', 'liquidity'), ('deprecated', '=', False)]"/>
                                        <field name="amount" sum="Total"/>
                                        <field name="bill_number"/>
                                        <field name="bill_date"/>
                                    </tree>
                                </field>
                            </group>
<!--                            <newline/>-->
                            <group string="Credit">
                                <field name="voucher_credits" nolabel="1" attrs="{'readonly': [('state','=', 'posted')]}">
                                    <tree editable="bottom">
                                        <!--<field name="name"/>-->
                                        <field name="type" invisible="1"/>
                                        <field name="account_id" domain="[('internal_type', '!=', 'liquidity'), ('deprecated', '=', False)]"/>
                                        <field name="amount" sum="Total"/>
                                        <field name="bill_number"/>
                                        <field name="bill_date"/>
                                    </tree>
                                </field>
                            </group>
<!--                            <newline>-->
                            <group>
                                <field name="narration" attrs="{'readonly': [('state','=', 'posted')]}"/>
                                <field name="move_id" readonly="1" attrs="{'invisible': [('state','!=', 'posted')]}"/>
                            </group>
<!--                        </group>-->
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

    <!--Voucher search view-->
    <record id="view_journal_voucher_search_form" model="ir.ui.view">
        <field name="name">journal.voucher.search.form</field>
        <field name="model">pappaya.journal.voucher</field>
        <field name="arch" type="xml">
           <search string="Journal Voucher">
                <field name="branch"/>
                <field name="date"/>
                <field name="state"/>
                <field name="move_id"/>
                <group expand="0" string="Group By">
                    <filter string="Branch" name="branch" context="{'group_by': 'branch'}"/>
                    <filter string="State" context="{'group_by':'state'}"/>
                </group>
            </search>
        </field>
    </record>

        <record id="action_journal_vouchers" model="ir.actions.act_window">
            <field name="name">Journal Vouchers</field>
            <field name="res_model">pappaya.journal.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','voucher')]</field>
            <field name="context">{'default_type': 'voucher', 'type':'voucher'}</field>
            <field name="search_view_id" ref="view_journal_voucher_search_form"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Journal Voucher
                </p>
            </field>
        </record>

        <record id="action_journal_voucher_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_journal_voucher_tree"/>
            <field name="act_window_id" ref="action_journal_vouchers"/>
        </record>

        <record id="action_journal_voucher_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_journal_voucher_form"/>
            <field name="act_window_id" ref="action_journal_vouchers"/>
        </record>

        <menuitem action="action_journal_vouchers" id="menu_action_journal_vouchers" parent="menu_account_journal_vouchers" sequence="1"/>


        <!-- Tree and Form view for Cash Payment Vouchers -->

        <record id="view_cash_payment_voucher_tree" model="ir.ui.view">
            <field name="name">pappaya.cash.payment.voucher.tree</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <tree edit="false">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_cash_payment_voucher_form" model="ir.ui.view">
            <field name="name">pappaya.cash.payment.voucher.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <form string="Cash Payment Voucher">
                    <header>
<!--                        <button name="action_confirm" type="object" string="Confirm" states="draft" class="oe_highlight"/>-->
                        <!--<button name="action_draft" type="object" string="Set To Draft" states="cancel" class="oe_highlight"/>-->
                        <field name="state" widget="statusbar" statusbar_visible="draft,posted"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title" attrs="{'invisible': [('state', '=', 'draft')]}">-->
                            <!--<h1><field name="name"/></h1>-->
                        <!--</div>-->
                        <group>
                            <group>
                                <field name="branch" required="1" attrs="{'readonly': [('state','=', 'posted')]}"/>
                                <field name="type" readonly="1" invisible="1"/>
                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': [('state','=', 'posted')]}"/>
                            </group>
                        </group>
                        <group string="Debit">
                            <field name="voucher_debits" nolabel="1" attrs="{'readonly': [('state','=', 'posted')]}">
                                <tree editable="bottom">
                                    <!--<field name="name"/>-->
                                    <field name="type" invisible="1"/>
                                    <field name="account_id" domain="[('internal_type', '!=', 'liquidity'), ('deprecated', '=', False)]"/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </group>
                        <group>
                            <field name="cash_in_hand" attrs="{'invisible': [('type','not in', ('cash_payment','cash_receipt'))]}"/>
                        </group>
                        <group string="Credit">
                            <field name="voucher_credits" nolabel="1" attrs="{'readonly': [('state','=', 'posted')]}">
                                <tree editable="bottom">
                                    <!--<field name="name"/>-->
                                    <field name="type" invisible="1"/>
                                    <field name="account_id" attrs="{'readonly': [('type','=', 'cash_payment')]}"/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </group>

                        <group>
                            <field name="narration" attrs="{'readonly': [('state','=', 'posted')]}"/>
                            <field name="move_id" readonly="1" attrs="{'invisible': [('state','!=', 'posted')]}"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

    <!--Cash Payment search view-->
    <record id="view_cash_payment_search_form" model="ir.ui.view">
        <field name="name">cash.payment.search.form</field>
        <field name="model">pappaya.journal.voucher</field>
        <field name="arch" type="xml">
           <search string="Cash Payment Voucher">
                <field name="branch"/>
                <field name="date"/>
                <field name="move_id"/>
                <field name="state"/>
                <group expand="0" string="Group By">
                    <filter string="Branch" name="branch" context="{'group_by': 'branch'}"/>
                    <filter string="State" context="{'group_by':'state'}"/>
                </group>
            </search>
        </field>
    </record>

        <!-- action for Cash payment Voucher , so type is cash_payment -->
        <record id="action_cash_payment_voucher" model="ir.actions.act_window">
            <field name="name">Cash Payment Vouchers</field>
            <field name="res_model">pappaya.journal.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','cash_payment')]</field>
            <field name="context">{'default_type': 'cash_payment', 'type':'cash_payment'}</field>
            <field name="search_view_id" ref="view_journal_voucher_search_form"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Cash Payment Voucher
                </p>
            </field>
        </record>

        <record id="action_cash_payment_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_cash_payment_voucher_tree"/>
            <field name="act_window_id" ref="action_cash_payment_voucher"/>
        </record>

        <record id="action_cash_payment_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_cash_payment_voucher_form"/>
            <field name="act_window_id" ref="action_cash_payment_voucher"/>
        </record>

        <menuitem action="action_cash_payment_voucher" id="menu_action_cash_payment" parent="menu_account_journal_vouchers" sequence="2"/>


        <!-- Tree and Form view for Cash Receipt Vouchers -->

        <record id="view_cash_receipt_voucher_tree" model="ir.ui.view">
            <field name="name">pappaya.cash.receipt.voucher.tree</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <tree edit="false">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_cash_receipt_voucher_form11" model="ir.ui.view">
            <field name="name">pappaya.cash.receipt.voucher.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <form string="Cash Receipt Voucher">
                    <header>
<!--                        <button name="action_confirm" type="object" string="Confirm" states="draft" class="oe_highlight"/>-->
                        <!--<button name="action_draft" type="object" string="Set To Draft" states="cancel" class="oe_highlight"/>-->
                        <field name="state" widget="statusbar" statusbar_visible="draft,posted"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title" attrs="{'invisible': [('state', '=', 'draft')]}">-->
                            <!--<h1><field name="name"/></h1>-->
                        <!--</div>-->
                        <group>
                            <group>
                                <field name="branch" required="1" attrs="{'readonly': [('state','=', 'posted')]}"/>
                                <field name="type" readonly="1" invisible="1"/>
                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': [('state','=', 'posted')]}"/>
                            </group>
                        </group>
                        <!--<group string="Debit" attrs="{'readonly': [('type', '=' , 'cash_receipt')]}">-->
                            <!--<field name="voucher_debits" nolabel="1" attrs="{'readonly': ['|',('state', '=' , 'posted'),('type', '=' , 'cash_receipt')]}">-->
                                <!--<tree editable="bottom">-->
                                    <!--&lt;!&ndash;<field name="name"/>&ndash;&gt;-->
                                    <!--<field name="type" invisible="1"/>-->
                                    <!--<field name="account_id"/>-->
                                    <!--<field name="amount" sum="Total"/>-->
                                <!--</tree>-->
                            <!--</field>-->
                        <!--</group>-->
                        <group>
                            <field name="cash_in_hand" attrs="{'invisible': [('type','not in', ('cash_payment','cash_receipt'))]}"/>
                        </group>
                        <group string="Credit">
                            <field name="voucher_credits" nolabel="1" attrs="{'readonly': [('state','=', 'posted')]}">
                                <tree editable="bottom">
                                    <!--<field name="name"/>-->
                                    <field name="type" invisible="1"/>
                                    <field name="account_id" attrs="{'readonly': [('type','=', 'cash_payment')]}"/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </group>

                        <group>
                            <field name="narration" attrs="{'readonly': [('state','=', 'posted')]}"/>
                            <field name="move_id" readonly="1" attrs="{'invisible': [('state','!=', 'posted')]}"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--Cash Receipt search view-->
        <record id="view_cash_receipt_search_form" model="ir.ui.view">
            <field name="name">cash.receipt.search.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
               <search string="Cash Receipt Voucher">
                    <field name="branch"/>
                    <field name="date"/>
                    <field name="move_id"/>
                    <field name="state"/>
                    <group expand="0" string="Group By">
                        <filter string="Branch" name="branch" context="{'group_by': 'branch'}"/>
                        <filter string="State" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- action for Cash Receipt Voucher , so type is cash_receipt -->
        <record id="action_cash_receipt_voucher" model="ir.actions.act_window">
            <field name="name">Cash Receipt Vouchers</field>
            <field name="res_model">pappaya.journal.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','cash_receipt')]</field>
            <field name="context">{'default_type': 'cash_receipt', 'type':'cash_receipt'}</field>
            <field name="search_view_id" ref="view_cash_receipt_search_form"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Cash Receipt Voucher
                </p>
            </field>
        </record>

        <record id="action_cash_receipt_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_cash_receipt_voucher_tree"/>
            <field name="act_window_id" ref="action_cash_receipt_voucher"/>
        </record>

        <record id="action_cash_receipt_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_cash_receipt_voucher_form11"/>
            <field name="act_window_id" ref="action_cash_receipt_voucher"/>
        </record>

        <menuitem action="action_cash_receipt_voucher" id="menu_action_cash_receipt" parent="menu_account_journal_vouchers" sequence="3"/>

        <!-- Tree and Form view for Bank Payment Vouchers -->

        <record id="view_bank_payment_voucher_tree" model="ir.ui.view">
            <field name="name">pappaya.bank.payment.voucher.tree</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <tree edit="false">
                    <field name="date"/>
                    <field name="branch"/>
                    <field name="amount"/>
                    <field name="name" string="Voucher#"/>
                    <field name="cheque_no"/>
                    <field name="cheque_date"/>
                    <field name="bank_account_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_bank_payment_voucher_form" model="ir.ui.view">
            <field name="name">pappaya.bank.payment.voucher.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <form string="Bank Payment Voucher">
                    <header>
                        <button name="action_approval1" type="object" string="Approve Cheque" states="draft" class="oe_highlight"/>
                        <button name="action_approval2" type="object" string="Authorize Cheque" states="check_approved" class="oe_highlight"/>
                        <button name="action_approval3" type="object" string="Issue Cheque" states="check_authorised" class="oe_highlight"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,check_approved,check_authorised,check_issued"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title" attrs="{'invisible': [('state', '=', 'draft')]}">-->
                            <!--<h1><field name="name"/></h1>-->
                        <!--</div>-->
                        <group>
                            <group>
                                <field name="branch" required="1" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                                <field name="payee_name" attrs="{'required': [('type', '=', 'bank_payment')], 'readonly': [('state','!=', 'draft')]}"/>
                                <field name="type" readonly="1" invisible="1"/>
                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            </group>
                        </group>
                        <group string="Debit">
                            <field name="voucher_debits" nolabel="1" attrs="{'readonly': [('state', '=' , 'check_issued')]}">
                                <tree editable="bottom">
                                    <field name="type" invisible="1"/>
                                    <field name="account_id" options='{"no_open": True, "no_create": True}'/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </group>
                        <group string="Credit">
                            <group>
                                <field name="bank_account_no" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="bank_account_id" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="bank_branch_id" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="cheque_lot_id" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="cheque_type" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}" widget="radio"/>
                                <field name="cheque_no" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="amount" attrs="{'readonly': [('state','=','check_issued')]}"/>
                                <field name="purpose_id" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                            </group>
                            <group>
                                <field name="bank_balance" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="cheque_date" attrs="{'required': [('type', '=' , 'bank_payment')], 'readonly': [('state','!=','draft')]}"/>
                            </group>
                        </group>
                        <group>
                            <field name="voucher_credits" nolabel="1" attrs="{'readonly': [('state','=', 'check_issued')]}">
                                <tree editable="bottom">
                                    <field name="type" invisible="1"/>
                                    <field name="account_id" options='{"no_open": True, "no_create": True}'/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </group>

                        <group>
                            <field name="narration" attrs="{'readonly': [('state','=', 'check_issued')]}"/>
                            <field name="move_id" readonly="1" attrs="{'invisible': [('state','!=', 'check_issued')]}"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--Bank Payment Voucher search view-->
        <record id="view_bank_payment_search_form" model="ir.ui.view">
            <field name="name">bank.payment.search.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
               <search string="Bank Payment Voucher">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date" string="Transaction Date"/>
                    <field name="cheque_no"/>
                    <field name="cheque_date"/>
                    <field name="bank_account_id"/>
                    <field name="move_id"/>
                    <field name="state"/>
                    <group expand="0" string="Group By">
                        <filter string="Voucher No" name="name" context="{'group_by': 'name'}"/>
                        <filter string="Transaction Date" name="date" context="{'group_by': 'date'}"/>
                        <filter string="Branch" name="branch" context="{'group_by': 'branch'}"/>
                        <filter string="Cheque No" name="cheque_no" context="{'group_by': 'cheque_no'}"/>
                        <filter string="Account" name="bank_account_id" context="{'group_by': 'bank_account_id'}"/>
                        <filter string="Cheque Date" name="cheque_date" context="{'group_by': 'cheque_date'}"/>
                        <filter string="State" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- action for Bank Payment Voucher , so type is bank_payment -->
        <record id="action_bank_payment_voucher" model="ir.actions.act_window">
            <field name="name">Bank Payment Vouchers</field>
            <field name="res_model">pappaya.journal.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','bank_payment')]</field>
            <field name="context">{'default_type': 'bank_payment', 'type':'bank_payment'}</field>
            <field name="search_view_id" ref="view_bank_payment_search_form"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Bank Payment Voucher
                </p>
            </field>
        </record>

        <record id="action_bank_payment_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_bank_payment_voucher_tree"/>
            <field name="act_window_id" ref="action_bank_payment_voucher"/>
        </record>

        <record id="action_bank_payment_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_bank_payment_voucher_form"/>
            <field name="act_window_id" ref="action_bank_payment_voucher"/>
        </record>

        <menuitem action="action_bank_payment_voucher" id="menu_action_bank_payment" parent="menu_account_journal_vouchers" sequence="4"/>


        <!-- Tree and Form view for Bank Receipt Vouchers -->

        <record id="view_bank_receipt_voucher_tree" model="ir.ui.view">
            <field name="name">pappaya.bank.receipt.voucher.tree</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <tree edit="false">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_bank_receipt_voucher_form" model="ir.ui.view">
            <field name="name">pappaya.bank.receipt.voucher.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <form string="Bank Receipt Voucher">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="draft,posted"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title" attrs="{'invisible': [('state', '=', 'draft')]}">-->
                            <!--<h1><field name="name"/></h1>-->
                        <!--</div>-->
                        <group>
                            <group>
                                <field name="branch" required="1" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                                <field name="type" readonly="1" invisible="1"/>
                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            </group>
                        </group>
                        <group string="Credit">
                            <field name="voucher_credits" nolabel="1" attrs="{'readonly': [('state','!=', 'draft')]}">
                                <tree editable="bottom">
                                    <field name="type" invisible="1"/>
                                    <field name="account_id" required="1" options='{"no_open": True, "no_create": True}'/>
                                    <field name="amount" required="1" sum="Total"/>
                                </tree>
                            </field>
                        </group>
                        <group string="Debit">
                            <group>
                                <field name="bank_account_number" attrs="{'required': [('type', '=' , 'bank_receipt')], 'readonly': [('state','!=', 'draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="bank_receipt_account_id" attrs="{'required': [('type', '=' , 'bank_receipt')], 'readonly': [('state','!=', 'draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="cheque_number" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            </group>
                            <group>
                                <field name="amount" attrs="{'required': [('type', '=' , 'bank_receipt')], 'readonly': [('state','!=', 'draft')]}"/>
                                <field name="cheque_date" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            </group>
                        </group>
                        <group>
                            <field name="narration" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            <field name="move_id" readonly="1" attrs="{'invisible': [('state','!=', 'posted')]}"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--Bank Payment Voucher search view-->
        <record id="view_bank_receipt_search_form" model="ir.ui.view">
            <field name="name">bank.receipt.search.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
               <search string="Bank Receipt Voucher">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date" string="Transaction Date"/>
                    <field name="cheque_no"/>
                    <field name="cheque_date"/>
                    <field name="bank_account_id"/>
                    <field name="move_id"/>
                    <field name="state"/>
                    <group expand="0" string="Group By">
                        <filter string="Voucher No" name="name" context="{'group_by': 'name'}"/>
                        <filter string="Transaction Date" name="date" context="{'group_by': 'date'}"/>
                        <filter string="Branch" name="branch" context="{'group_by': 'branch'}"/>
                        <filter string="Cheque No" name="cheque_no" context="{'group_by': 'cheque_no'}"/>
                        <filter string="Account" name="bank_account_id" context="{'group_by': 'bank_account_id'}"/>
                        <filter string="Cheque Date" name="cheque_date" context="{'group_by': 'cheque_date'}"/>
                        <filter string="State" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- action for Bank Receipt Voucher , so type is bank_payment -->
        <record id="action_bank_receipt_voucher" model="ir.actions.act_window">
            <field name="name">Bank Receipt Vouchers</field>
            <field name="res_model">pappaya.journal.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','bank_receipt')]</field>
            <field name="context">{'default_type': 'bank_receipt', 'type':'bank_receipt'}</field>
            <field name="search_view_id" ref="view_bank_receipt_search_form"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Bank Receipt Voucher
                </p>
            </field>
        </record>

        <record id="action_bank_receipt_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_bank_receipt_voucher_tree"/>
            <field name="act_window_id" ref="action_bank_receipt_voucher"/>
        </record>

        <record id="action_bank_receipt_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_bank_receipt_voucher_form"/>
            <field name="act_window_id" ref="action_bank_receipt_voucher"/>
        </record>

        <menuitem action="action_bank_receipt_voucher" id="menu_action_bank_receipt" parent="menu_account_journal_vouchers" sequence="5"/>


        <!-- Tree and Form view for Multiple Bank Payment Vouchers -->

        <record id="view_multiple_bank_payment_voucher_tree" model="ir.ui.view">
            <field name="name">pappaya.multiple.bank.receipt.voucher.tree</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <tree edit="false">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_multiple_bank_receipt_voucher_form" model="ir.ui.view">
            <field name="name">pappaya.multiple.bank.receipt.voucher.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <form string="Multiple Bank Receipt Voucher">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="draft,check_approved,check_authorised,check_issued"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title" attrs="{'invisible': [('state', '=', 'draft')]}">-->
                            <!--<h1><field name="name"/></h1>-->
                        <!--</div>-->
                        <group>
                            <group>
                                <field name="payee_name" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                                <field name="type" readonly="1" invisible="1"/>
                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            </group>
                        </group>
                        <group string="Credit">
                            <group>
                                <field name="bank_branch_id" attrs="{'required': [('type', '=' , 'multiple_bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="bank_account_id" attrs="{'required': [('type', '=' , 'multiple_bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="cheque_lot_id" attrs="{'required': [('type', '=' , 'multiple_bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="cheque_no" attrs="{'required': [('type', '=' , 'multiple_bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="purpose_id" attrs="{'required': [('type', '=' , 'multiple_bank_payment')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                            </group>
                            <group>
                                <field name="bank_balance" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="cheque_date" attrs="{'required': [('type', '=' , 'multiple_bank_payment')], 'readonly': [('state','!=','draft')]}"/>
                                <field name="amount" attrs="{'readonly': [('state','=','check_issued')]}"/>
                            </group>
                        </group>
                        <group>
                            <field name="voucher_credits" nolabel="1" attrs="{'readonly': [('state','!=', 'draft')]}">
                                <tree editable="bottom">
                                    <field name="account_id" options='{"no_open": True, "no_create": True}'/>
                                    <field name="amount" sum="Total"/>
                                </tree>
                            </field>
                        </group>
                        <group>
                            <group>
                                <field name="branch_ledger_id" attrs="{'readonly': [('state','!=', 'draft')]}" options='{"no_open": True, "no_create": True}'/>
                            </group>
                            <group>
                                <button class="oe_stat_button" string="Get Branches" name="%(get_branches_from_ledger_wizard)d" type="action"/>
                            </group>
                        </group>
                        <group string="Debit">
                            <field name="voucher_debits" nolabel="1" attrs="{'readonly': [('state','!=', 'draft')]}">
                                <tree editable="bottom">
                                    <field name="branch_id"/>
                                    <field name="amount"/>
                                </tree>
                            </field>
                        </group>
                        <group>
                            <field name="narration" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            <field name="move_id" readonly="1" attrs="{'invisible': [('state','!=', 'check_issued')]}"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- action for Multiple Bank Payment Voucher , so type is bank_payment -->
        <record id="action_multiple_bank_payment_voucher" model="ir.actions.act_window">
            <field name="name">Multiple Bank Payment Vouchers</field>
            <field name="res_model">pappaya.journal.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','multiple_bank_payment')]</field>
            <field name="context">{'default_type': 'multiple_bank_payment', 'type':'multiple_bank_payment'}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Multiple Bank Payment Voucher
                </p>
            </field>
        </record>

        <record id="action_multiple_bank_payment_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_multiple_bank_payment_voucher_tree"/>
            <field name="act_window_id" ref="action_multiple_bank_payment_voucher"/>
        </record>

        <record id="action_multiple_bank_payment_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_multiple_bank_receipt_voucher_form"/>
            <field name="act_window_id" ref="action_multiple_bank_payment_voucher"/>
        </record>

        <menuitem action="action_multiple_bank_payment_voucher" id="menu_action_multiple_bank_payment" parent="menu_account_journal_vouchers" sequence="6"/>


        <!-- Tree and Form view for Contra Vouchers -->

        <record id="view_contra_voucher_tree" model="ir.ui.view">
            <field name="name">pappaya.contra.voucher.tree</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <tree edit="false">
                    <field name="name"/>
                    <field name="branch"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_contra_voucher_form" model="ir.ui.view">
            <field name="name">pappaya.contra.voucher.form</field>
            <field name="model">pappaya.journal.voucher</field>
            <field name="arch" type="xml">
                <form string="Contra Voucher">
                    <header>
                        <button name="action_approval1" type="object" string="Approve Cheque" states="draft" class="oe_highlight"/>
                        <button name="action_approval2" type="object" string="Authorize Cheque" states="check_approved" class="oe_highlight"/>
                        <button name="action_approval3" type="object" string="Issue Cheque" states="check_authorised" class="oe_highlight"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,check_approved,check_authorised,check_issued"/>
                    </header>
                    <sheet>
                        <!--<div class="oe_title" attrs="{'invisible': [('state', '=', 'draft')]}">-->
                            <!--<h1><field name="name"/></h1>-->
                        <!--</div>-->
                        <group>
                            <group>
                                <field name="branch" required="1" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                                <field name="payee_name" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                                <field name="type" readonly="1" invisible="1"/>
                            </group>
                            <group>
                                <field name="date" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            </group>
                        </group>
                        <group string="Debit">
                            <group>
                                <field name="ledger_id" attrs="{'required': [('type', '=' , 'contra_voucher')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="contra_cheque_date" attrs="{'readonly': [('state','!=','draft')]}"/>
                            </group>
                            <group>
                                <field name="contra_cheque_no" attrs="{'readonly': [('state','!=','draft')]}"/>
                                <field name="contra_amount" attrs="{'required': [('type', '=' , 'contra_voucher')]}"/>
                            </group>
                        </group>
                        <group string="Credit">
                            <group>
                                <field name="bank_account_id" attrs="{'required': [('type', '=' , 'contra_voucher')], 'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="cheque_no" attrs="{'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="amount" string="Trans.Amount" attrs="{'required': [('type', '=' , 'contra_voucher')], 'readonly': [('state','=','check_issued')]}"/>
                                <field name="bank_charges" attrs="{'readonly': [('state','=','check_issued')]}"/>
                            </group>
                            <group>
                                <field name="cheque_lot_id" attrs="{'readonly': [('state','!=','draft')]}" options='{"no_open": True, "no_create": True}'/>
                                <field name="cheque_date" attrs="{'readonly': [('state','!=','draft')]}"/>
                            </group>
                        </group>
                        <group>
                            <field name="narration" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            <field name="move_id" readonly="1" attrs="{'invisible': [('state','!=', 'check_issued')]}"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                      <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                      <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- action for Contra Voucher , so type is contra_voucher -->
        <record id="action_contra_voucher" model="ir.actions.act_window">
            <field name="name">Contra Vouchers</field>
            <field name="res_model">pappaya.journal.voucher</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','contra_voucher')]</field>
            <field name="context">{'default_type': 'contra_voucher', 'type':'contra_voucher'}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to register a Contra Voucher
                </p>
            </field>
        </record>

        <record id="action_contra_voucher_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_contra_voucher_tree"/>
            <field name="act_window_id" ref="action_contra_voucher"/>
        </record>

        <record id="action_contra_voucher_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_contra_voucher_form"/>
            <field name="act_window_id" ref="action_contra_voucher"/>
        </record>

        <menuitem action="action_contra_voucher" id="menu_action_contra_voucher" parent="menu_account_journal_vouchers" sequence="7"/>

    </data>
</odoo>
