<odoo>
    <data>

        <record id="view_pappaya_student_tree" model="ir.ui.view">
            <field name="name">view.pappaya.student.tree</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <tree string="Student" create="0" delete="0" edit="0">
                    <field name="admission_no"/>
                    <field name="student_full_name"/>
                    <field name="date_of_birth"/>
                    <field name="gender"/>
                    <field name="residential_type_id" options="{'no_open': True,'no_create':True}"/>
                    <field name="joining_academic_year_id" options="{'no_open': True,'no_create':True}"/>
                    <field name="school_id" options="{'no_open': True,'no_create':True}"/>
                </tree>
            </field>
        </record>

        <record id="view_pappaya_student_form" model="ir.ui.view">
            <field name="name">view.pappaya.student.form</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <form string="Student" create="0" delete="0">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <!--<button type="object" string="Fee Collection" class="oe_stat_button" icon="fa-bars" name="action_view_partner_invoices" context="{'default_partner_id': partner_id}"/>-->
                            <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-check" groups="pappaya_core.group_olms_principal,pappaya_core.group_olms_admin_head,base.group_system">
                                <field name="active" widget="boolean_button" options='{"terminology": "active"}'/>
                            </button>
                        </div>
                        <field name="image" widget='image' class="oe_avatar" options='{"preview_image": "image_medium"}'/>
                        <div class="oe_title">
                            <field name="company_type" widget="radio" class="oe_edit_only" options="{'horizontal': true}" invisible="1"/>
                            <label for="sur_name" string="Name"/>
                            <h1>
                                <table>
                                    <tr>
                                        <td style="padding-right:6px"><field name="sur_name" placeholder="Sur Name" style="width:100%"/></td>
                                        <td><field name="name" required="1" placeholder="Name" style="width:100%"/></td>
                                    </tr>
                                </table>
                            </h1>
                        </div>
                        <notebook colspan="4">
                            <page name="general_info" string="General">
                                <group>
                                    <group>
                                        <field name="form_no" readonly="1"/>
                                        <field name="admission_no" readonly="1"/>
                                        <field name="date_of_birth" readonly="1"/>
                                        <field name="gender" readonly="1"/>
                                        <field name="aadhaar_no" readonly="1"/>
                                        <field name="filename" invisible="1"/>
                                        <field name="aadhaar_file" class="oe_left oe_avatar" filename="filename"/>
                                    </group>
                                    <group>
                                        <field name="blood_group_id" options="{'no_open': True,'no_create':True}" domain="[('type','=','blood_group')]"/>
                                        <field name="religion_id" options="{'no_open': True,'no_create':True}" domain="[('type','=', 'religion')]"/>
                                        <field name="caste_id" options="{'no_open': True,'no_create':True}" domain="[('type','=', 'caste')]"/>
                                        <field name="community_id" domain="[('type','=','community')]" context="{'master_type':'others','individual_master_type':'community'}" options="{'no_open': True,'no_create':True}" />
                                        <field name="student_wallet_amount" readonly="1"/>
                                        <field name="caution_deposit" readonly="1"/>
                                    </group>
                                    <group>
                                        <field name="user_type" invisible="1"/>
                                        <field name="admission_id" invisible="1"/>
                                        <field name="partner_id" invisible="1" options="{'no_open': True,'no_create':True}"/>
                                        <field name="student_full_name" invisible="1"/>
                                        <field name="update_fullname" invisible="1"/>
                                        <field name="cancel" invisible="1"/>
                                    </group>
                                    <group/>
                                </group>
                            </page>
                            <page name="education" string="Education">
                                <group string="Present Information">
                                    <group>
                                        <field name="school_id" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                        <field name="course_id" options="{'no_open': True,'no_create':True}" readonly="1" />
                                        <field name="group_id" options="{'no_open': True,'no_create':True}" readonly="1" />
                                        <field name="batch_id" options="{'no_open': True,'no_create':True}" readonly="1" />
                                        <field name="package_id" options="{'no_open': True,'no_create':True}" readonly="1" />
                                        <field name="course_package_id" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                        <field name="medium_id" options="{'no_open': True,'no_create':True}" readonly="1" domain="[('type','=','medium')]" context="{'master_type':'others','individual_master_type':'medium'}"/>
                                    </group>
                                    <group>
                                        <field name="joining_academic_year_id" readonly="1" domain="[('school_id','=',school_id)]" options="{'no_open': True,'no_create':True}"/>
                                        <field name="date_of_joining" readonly="1"/>
                                        <field name="office_type_id" readonly="1" options="{'no_open': True,'no_create':True}"/>
                                        <field name="student_type" invisible="1"/>
                                        <field name="residential_type_id" readonly="1" options="{'no_open': True,'no_create':True}"/>
                                    </group>
                                </group>
                                <group>
                                    <group string="Hall Ticket Information">
                                        <field name="hall_ticket_no"/>
                                        <field name="board_type_id" domain="[('type','=','board_type')]" options="{'no_open': True,'no_create':True}"  context="{'master_type':'others','individual_master_type':'board_type'}"/>
										<field name="board_code"/>
										<field name="course_opted"/>
										<field name="total_marks"/>
										<field name="rank"/>
										<field name="grade"/>
                                    </group>
                                    <group string="Previous Information">
                                        <field name="previous_course_id" force_save="1" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                        <field name="previous_batch_id" force_save="1" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                        <field name="previous_group_id" force_save="1" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                        <field name="previous_package_id" force_save="1" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                        <field name="previous_course_package_id" force_save="1" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                        <field name="previous_medium_id" force_save="1" options="{'no_open': True,'no_create':True}" readonly="1" domain="[('type','=','medium')]" context="{'master_type':'others','individual_master_type':'medium'}"/>
                                    </group>
                                </group>
                            </page>
                            <page name="parent" string="Parent">
                                <group>
                                    <group>
                                        <field name="father_name" string="Father Name" readonly="1"/>
                                        <field name="father_occupation_id" domain="[('type','=','occupation')]" options="{'no_open': True,'no_create':True}"/>
                                        <field name="father_mobile" required="1"/>
                                        <field name="father_email"/>
                                    </group>
                                    <group>
                                        <field name="mother_name" string="Mother Name" readonly="1"/>
                                        <field name="mother_occupation_id" domain="[('type','=','occupation')]" options="{'no_open': True,'no_create':True}"/>
                                        <field name="mother_mobile"/>
                                        <field name="mother_email"/>
                                    </group>
                                </group>
                            </page>
                            <page name="address_info" string="Address">
                                <group>
                                    <group string="Present Address">
										<field name="temp_street"/>
										<field name="temp_city_id" options="{'no_open': True,'no_create':True}"/>
										<field name="temp_district_id" options="{'no_open': True,'no_create':True}"/>
										<field name="temp_mandal_id" options="{'no_open': True,'no_create':True}"/>
										<field name="temp_state_id" domain="[('country_id','=',temp_country_id)]" options="{'no_open': True,'no_create':True}"/>
										<field name="temp_zip"/>
										<field name="temp_country_id" domain="[('is_active','=',True)]" options='{"no_open": True, "no_create": True}'/>
                                    </group>
                                    <group string="Permanent Address">
										<field name="street"/>
										<field name="city_id" options="{'no_open': True,'no_create':True}"/>
										<field name="district_id" options="{'no_open': True,'no_create':True}"/>
										<field name="mandal_id" options="{'no_open': True,'no_create':True}"/>
										<field name="state_id" domain="[('country_id','=',country_id)]" options="{'no_open': True,'no_create':True}"/>
										<field name="zip"/>
										<field name="country_id" domain="[('is_active','=',True)]" options='{"no_open": True, "no_create": True}'/>
                                    </group>
                                </group>
                            </page>
                            <page name="rfid_info" string="RFID">
                                <group>
                                    <group>
                                        <field name="rfid_card_no"/>
                                        <field name="biometric_id" readonly="1"/>
                                    </group>
                                    <group>
                                        <button name="enroll_rf_id" type="object" string="Enroll RF ID"/>
                                        <field name="canteen_rf_card_id" readonly="1"/>
                                    </group>
                                </group>
                            </page>
                            <page name="fees_collection" string="Fees Collections">
								<separator/>
                                <field name="fees_collection_o2m_id" nolabel="1" colspan="4"  class="fixed_table" open="false">
                                    <tree string ="Fees Collection" editable="bottom" create="false" open="false" delete="false">
                                        <field name="pay" readonly="1"/>
                                        <field name="name" readonly="1"/>
                                        <field name="gst_total" string="Amount" readonly="1"/>
                                        <field name="cgst" readonly="1"/>
                                        <field name="sgst" readonly="1"/>
                                        <field name="amount" string="Total" readonly="1"/>
                                        <field name="res_adj_amt" readonly="1"/>
                                        <field name="concession_amount" readonly="1"/>
                                        <field name="concession_type_id" domain="[('type','=','concession')]" options="{'no_open': True,'no_create':True}" readonly="1" invisible="1"/>
                                        <field name="concession_applied" invisible="1"/>
                                        <field name="due_amount" readonly="1"/>
                                        <field name="res_adj_amt_extra" invisible="1" readonly="1" />
                                        <field name="total_paid" readonly="1"/>
                                        <field name="adjusted_amount" readonly="1"/>
                                        <field name="term_state" readonly="1"/>
                                        <field name="allow_refund" invisible="1"/>
                                        <field name="refund_amount" attrs="{'readonly':[('allow_refund','=',False)]}"/> <!-- attrs="{'readonly':['|',('allow_refund','!=','paid'),('name.is_refundable_fee','=',True)]}" -->
                                    </tree>
                                    <form string="Fees Collection">
										<group colspan="4" col="4">
											<field name="name" readonly="1" options="{'no_open': True,'no_create':True}"/>
											<field name="gst_total" string="Amount" readonly="1"/>
											<field name="cgst" readonly="1"/>
											<field name="sgst" readonly="1"/>
											<field name="amount" string="Total" readonly="1"/>
											<field name="res_adj_amt" readonly="1"/>
											<field name="concession_amount" readonly="1"/>
											<field name="due_amount" readonly="1"/>
											<field name="total_paid" readonly="1"/>
                                            <field name="adjusted_amount" readonly="1"/>
											<field name="term_state" readonly="1"/>
											<field name="refund_amount" readonly="1"/>
										</group>
									</form>
                                </field>
							</page>
                            <page name="transport_history" string="Transport History" attrs="{'invisible': [('is_transport', '=', False)]}">
                                <group>
                                    <field name="transport_history_ids" nolabel="1" colspan="4"  class="fixed_table" open="false">
                                        <tree editable="bottom" create="false" open="false" delete="false">
                                            <field name="branch_id" domain="[('type','=','branch')]" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                            <field name="service_id" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                            <field name="route_id" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                            <field name="transport_slab_id" options="{'no_open': True,'no_create':True}" readonly="1"/>
                                            <field name="active" readonly="1"/>
                                        </tree>
                                        <form create="false" edit="false">
                                            <group colspan="4"  col="4">
                                                <field name="branch_id" readonly="1" options="{'no_open': True,'no_create':True}"/>
                                                <field name="service_id" readonly="1" options="{'no_open': True,'no_create':True}"/>
                                                <field name="route_id" readonly="1" options="{'no_open': True,'no_create':True}"/>
                                                <field name="transport_slab_id" readonly="1" options="{'no_open': True,'no_create':True}"/>
                                                <field name="active" readonly="1"/>
                                            </group>
                                        </form>
                                    </field>
                                    <field name="is_transport" invisible="1"/>
                                </group>
							</page>
                            <page string="Grade Joining Document">
                                <field name="enq_grade_doc_ids">
                                    <tree create="false" delete="false">
                                        <field name="document_name" readonly="1"/>
                                        <field name="stage_name" readonly="1"/>
                                        <field name="required" readonly="1"/>
                                        <field name="document_file" widget="binary" filename="filename"/>
                                        <field name="filename" invisible="1"/>
                                    </tree>
                                    <form create="false" edit="false">
                                        <group col="4">
                                            <field name="document_name" readonly="1"/>
                                            <field name="document_file" readonly="1" filename="filename"/>
                                            <field name="stage_name" readonly="1"/>
                                            <field name="required" readonly="1"/>
                                            <field name="filename" invisible="1"/>
                                        </group>
                                    </form>
                                </field>
                            </page>
                            <page string="Tracking History">
                                <field name="enquiry_history_ids">
                                    <tree create="false" edit="false" delete="false">
                                        <field name="document_number"/>
                                        <field name="course_package_id"/>
                                        <field name="movement_stage"/>
                                        <field name="description"/>
                                        <field name="amount"/>
                                        <field name="updated_on"/>
                                        <field name="user_id"/>
                                    </tree>
                                    <form create="false" edit="false">
                                        <group col="4">
                                            <field name="document_number" readonly="1"/>
                                            <field name="course_package_id" readonly="1" options='{"no_open": True, "no_create": True}'/>
                                            <field name="movement_stage" readonly="1"/>
                                            <field name="user_id" options='{"no_open": True, "no_create": True}' readonly="1"/>
                                            <field name="amount"/>
                                            <field name="updated_on" readonly="1"/>
                                            <field name="description" readonly="1"/>
                                            <field name="enquiry_id" string="Admission" options='{"no_open": True, "no_create": True}' readonly="1"/>
                                        </group>
                                    </form>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user" />
                        <field name="message_ids" widget="mail_thread" />
                    </div>
                </form>
            </field>
        </record>


        <record id="view_pappaya_student_search" model="ir.ui.view">
			<field name="name">Student Profile Search</field>
			<field name="model">res.partner</field>
			<field name="priority" eval="8" />
			<field name="arch" type="xml">
				<search string="Student">
					<field name="admission_no" string="Admission No"/>
					<field name="form_no" string="Form No"/>
					<field name="student_full_name" string="Student Name"/>
					<separator/>
					<newline />
                    <filter string="Archived" name="inactive" domain="[('active','=',False)]"/>
					<group expand="0" string="Group By...">
						<filter string="Academic Year" domain="[]" context="{'group_by':'joining_academic_year_id'}"/>
						<filter string="Branch" domain="[]" context="{'group_by':'school_id'}"/>
						<filter string="Course" domain="[]" context="{'group_by':'course_id'}"/>
						<filter string="Group" domain="[]" context="{'group_by':'group_id'}"/>
						<filter string="Batch" domain="[]" context="{'group_by':'batch_id'}"/>
						<filter string="Package" domain="[]" context="{'group_by':'package_id'}"/>
						<filter string="Course Package" domain="[]" context="{'group_by':'course_package_id'}"/>
					</group>
				</search>
			</field>
		</record>

		<record id="act_open_pappaya_student_profile_view" model="ir.actions.act_window">
            <field name="name">Student Profile</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('user_type','=','student')]</field>
            <field name="context">{'default_user_type':'student'}</field>
           <field name="search_view_id" ref="view_pappaya_student_search"/>
            <field name="view_ids" eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('view_pappaya_student_tree')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('view_pappaya_student_form')})]"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a new Student Profile.
                </p>
            </field>
        </record>

        <!--Enroll RF-->

        <record id="view_enroll_rf_id_form" model="ir.ui.view">
            <field name="name">view.enroll.rf.id.form</field>
            <field name="model">enroll.rf.id</field>
            <field name="arch" type="xml">
                <form string="Enroll RF ID">
                	<group>
                		<button name="update_rf_id" string="Enroll" type="object"/>
                		<field name="message" readonly="1" nolabel="1"/>
                	</group>
                </form>
            </field>
        </record>
		
        <record model="ir.actions.act_window" id="action_view_enroll_rf_id_form">
			<field name="name">Enroll RF ID</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">enroll.rf.id</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>		

    </data>
</odoo>
