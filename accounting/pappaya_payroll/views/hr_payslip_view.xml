<?xml version="1.0" encoding="UTF-8"?>
<odoo>
<data>
	
	
	
	<record model="ir.ui.view" id="view_view_hr_payslip_form_inherit_pappaya">
	    <field name="name">hr.payslip.form.form.view.inherit</field>
	    <field name="model">hr.payslip</field>
	    <field name="inherit_id" ref="hr_payroll.view_hr_payslip_form"/>
	    <field name="arch" type="xml">
	    	<xpath expr="//form" position="attributes">
                <attribute name="delete">0</attribute>
            </xpath>
            <xpath expr="//button[@name='%(hr_payroll.act_payslip_lines)d']" position="replace">
                <button name="%(nspira_payslip_reports)d" string="View Payslips" type="action" icon="fa-money"/>
                <!--<button name="report_payslip_emp" class="oe_stat_button" string="View Payslip" icon="fa-money" type="object"/>-->
            </xpath>

	    	<field name="contract_id" position="before">
	    		<field name="branch_id" string="Branch" options="{'no_open': True, 'no_create':True}" attrs="{'readonly':[('state','!=','draft')]}"/>
	    	</field>
            <field name="employee_id" position="replace">
                <field name="employee_id" placeholder="Employee" options="{'no_open': True, 'no_create':True}"/>
                - <field name="emp_no" readonly="1"/>
	    	</field>
	        <field name="credit_note" position="before" >
	        	<field name="total_work_days" />
	        	<field name="lop_days" />
	        	<field name="paid_days" string="Total Worked Days" />
	        	<field name="paid_hours" string="Total Worked Hours" />
	        	<field name="is_payroll_cycle" readonly="1"/>
	        	<field name="is_lock" readonly="1"/>
	        	<field name="is_sublock" readonly="1"/>
	        	
	        	<field name="work_hours" invisible="1"/>
	        	<field name="total_work_hours" invisible="1"/>
	        	<field name="lop_hours" invisible="1"/>
	        	<field name="payslip_bank_id" options="{'no_open': True, 'no_create':True}" domain="[('is_payroll_bank','=',True)]" invisible="1"/>
	        </field>
	        
	        <field name="credit_note" position="replace">
           		<field name="credit_note" invisible="1"/>
           	</field>

            <xpath expr="//notebook[1]" position="before">
                <group col="4" invisible="1">
                    <field name="month_name"/>
                    <field name="gross_amount"/>
                    <field name="basic_amount"/>
                    <field name="hra_amount"/>
                    <field name="da_amount"/>
                    <field name="lop_amount"/>
                    <field name="pf_amount"/>
                    <field name="pt_amount"/>
                    <field name="esi_amount"/>
                    <field name="loan_amount"/>
                    <field name="net_amount"/>
                    <field name="is_paysheet_created"/>
                </group>
            </xpath>

	        <field name="state" position="before">
            	<button name="action_payslip_send" type="object" string="Send Mail" class="oe_highlight" groups="pappaya_base.hr_executives,pappaya_base.hr_cpo,pappaya_base.hr_operations_head,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
            </field>

			<xpath expr="//button[@name='action_payslip_done']" position="replace">
                <button string="Confirm" name="action_payslip_done_modification" type="object" states="draft" class="oe_highlight" groups="pappaya_base.hr_executives,pappaya_base.hr_cpo,pappaya_base.hr_operations_head,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
            </xpath>

            <xpath expr="//button[@name='refund_sheet']" position="replace">
                <button string="Refund" name="refund_sheet" states="confirm,done" type="object" groups="pappaya_base.hr_executives,pappaya_base.hr_cpo,pappaya_base.hr_operations_head,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
            </xpath>

            <xpath expr="//button[@name='compute_sheet']" position="replace">
                <button string="Compute Sheet" name="compute_sheet" type="object" states="draft" class="oe_highlight" groups="pappaya_base.hr_executives,pappaya_base.hr_cpo,pappaya_base.hr_operations_head,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
            </xpath>

            <xpath expr="//button[@name='action_payslip_cancel']" position="replace">
                <button string="Cancel Payslip" name="action_payslip_cancel" type="object" states="draft,hr_check,confirm,verify" groups="pappaya_base.hr_executives,pappaya_base.hr_cpo,pappaya_base.hr_operations_head,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
            </xpath>

            <xpath expr="//button[@name='action_payslip_draft']" position="replace">
                <button string="Set to Draft" name="action_payslip_draft" type="object" states="cancel" groups="pappaya_base.hr_executives,pappaya_base.hr_cpo,pappaya_base.hr_operations_head,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
            </xpath>
			
            <xpath expr="//field[@name='contract_id']" position="replace">
                <field name="contract_id" force_save="1" domain="[('employee_id','=',employee_id)]" context="{'default_employee_id': employee_id}" on_change="1" can_create="true" can_write="true" modifiers="{'readonly':[['state','not in',['draft']]]}" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='struct_id']" position="replace">
                <field name="struct_id" options="{'no_open': True, 'no_create':True}" force_save="1" attrs="{'required':[('contract_id','!=',False)]}" can_create="true" can_write="true" modifiers="{'readonly':[['state','not in',['draft']]],'required':[['contract_id','!=',false]]}"/>
            </xpath>

            <xpath expr="//field[@name='input_line_ids']/tree/field[@name='contract_id']" position="replace">
                <field name="contract_id" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='input_line_ids']/form/group/field[@name='contract_id']" position="replace">
                <field name="contract_id" invisible="1"/>
            </xpath>

            <xpath expr="//field[@name='worked_days_line_ids']/tree/field[@name='contract_id']" position="replace">
                <field name="contract_id" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='worked_days_line_ids']/form/group/field[@name='contract_id']" position="replace">
                <field name="contract_id" invisible="1"/>
            </xpath>
            
            <xpath expr="//field[@name='worked_days_line_ids']/tree/field[@name='number_of_hours']" position="replace">
                <field name="number_of_hours" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='worked_days_line_ids']/form/group/field[@name='number_of_hours']" position="replace">
                <field name="number_of_hours" invisible="1"/>
            </xpath>

	        <xpath expr="//field[@name='line_ids']/tree/field[@name='quantity']" position="replace">
                <field name="quantity" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']/form/group/field[@name='quantity']" position="replace">
                <field name="quantity" invisible="1"/>
            </xpath>
	        <xpath expr="//field[@name='line_ids']/tree/field[@name='rate']" position="replace">
                <field name="rate" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']/form/group/field[@name='rate']" position="replace">
                <field name="rate" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']/form/group/field[@name='salary_rule_id']" position="replace">
                <field name="salary_rule_id" options="{'no_open': True, 'no_create':True}"/>
            </xpath>
            <xpath expr="//field[@name='line_ids']/form/group/field[@name='category_id']" position="replace">
                <field name="category_id" options="{'no_open': True, 'no_create':True}"/>
            </xpath>
            <xpath expr="//field[@name='company_id']" position="replace">
                <field name="company_id" groups="base.group_multi_company" options="{'no_open': True, 'no_create':True}"/>
            </xpath>
            <xpath expr="//field[@name='payslip_run_id']" position="replace">
                <field name="payslip_run_id" domain="[('state','=','draft')]" options="{'no_open': True, 'no_create':True}"/>
            </xpath>
            <xpath expr="//field[@name='details_by_salary_rule_category']" position="replace">
                <field name="details_by_salary_rule_category" context="{'group_by':'category_id'}" domain="[('appears_on_payslip', '=', True)]">
                    <tree string="Payslip Lines" decoration-info="total == 0">
                        <field name="category_id"/>
                        <field name="name"/>
                        <field name="code"/>
                        <field name="total"/>
                    </tree>
                    <form string="Payslip Lines">
                        <group col="4">
                            <field name="category_id" options="{'no_open': True, 'no_create':True}"/>
                            <field name="name"/>
                            <field name="code"/>
                            <field name="total"/>
                        </group>
                    </form>
                </field>
            </xpath>
            <xpath expr="//page[1]" position="before">
                <page string="Daily Attendance" invisible="1">
                    <field name="employee_attendance_line">
                        <tree string="Daily Attendance" editable="bottom" delete="false">
                            <field name="attendance_date" readonly="1" force_save="1"/>
                            <field name="biometric_id" readonly="1" force_save="1"/>
                            <field name="check_in" attrs="{'readonly':[('state','!=','draft')]}" force_save="1"/>
                            <field name="check_out" attrs="{'readonly':[('state','!=','draft')]}" force_save="1"/>
                            <field name="attendance_status" attrs="{'readonly':[('state','!=','draft')]}"/>
                            <field name="worked_hours"/>
                            <field name="state" readonly="1"/>
                            <button name="attendance_confirm" string="Confirm" type="object" attrs="{'invisible':[('state','!=','draft')]}" groups="pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
                            <button name="attendance_reset" string="Reset to Draft" type="object" attrs="{'invisible':[('state','!=','done')]}" groups="pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
                        </tree>
                        <form string="Daily Attendance">
                            <group col="4">
                                <field name="attendance_date"/>
                                <field name="biometric_id"/>
                                <field name="check_in"/>
                                <field name="check_out"/>
                                <field name="attendance_status"/>
                                <field name="worked_hours"/>
                            </group>
                        </form>
                    </field>
                </page>
            </xpath>

	 </field>
    </record>
	
	
	
	<record id="view_hr_payslip_inherit_form_inherit_account" model="ir.ui.view">
        <field name="name">view_hr_payslip_inherit.form.inherit.account</field>
        <field name="model">hr.payslip</field>
        <field name="inherit_id" ref="hr_payroll_account.view_hr_payslip_inherit_form"/>
        <field name="arch" type="xml">
                <field name="journal_id" position="replace">
                	<field name="journal_id" required="0" options="{'no_open': True, 'no_create':True}"/>
                </field>
        </field>
    </record>


	<record model="ir.ui.view" id="pappaya_account_view_hr_payslip_inherit_form">
            <field name="name">hr.payslip.inherit.form</field>
            <field name="model">hr.payslip</field>
            <field name="inherit_id" ref="hr_payroll_account.view_hr_payslip_inherit_form"/>
            <field name="arch" type="xml">
                <field name="move_id" position="replace">
                     <field name="move_id" readonly="1"  options="{'no_open': True, 'no_create':True}"/>
                     <field name="partial_date" readonly="1" />
                     <field name="partial_move_id" readonly="1" options="{'no_open': True, 'no_create':True}" />
                </field>
            </field>
        </record>


    <record id="hr_payslip_run_filter_inherit_pappaya" model="ir.ui.view">
        <field name="name">hr.payslip.run.search.inheit.papapya</field>
        <field name="model">hr.payslip.run</field>
        <field name="inherit_id" ref="hr_payroll.hr_payslip_run_filter"/>
        <field name="arch" type="xml">
                <field name="name" position="after">
                	<field name="company_id"/>
                </field>
        </field>
    </record>

    <!-- <record id="hr_payroll.hr_payslip_run_tree" model="ir.ui.view">
        <field name="name">hr.payslip.run.tree</field>
        <field name="model">hr.payslip.run</field>
        <field name="arch" type="xml">
            <tree string="Payslips Batches">
                <field name="branch_id"/>
                <field name="name" string="Payslip Batch Name"/>
                <field name="date_start"/>
                <field name="date_end"/>
                <field name="state"/>
            </tree>
        </field>
    </record> -->

    <record id="hr_payslip_run_tree_inherit_pappaya" model="ir.ui.view">
        <field name="name">hr.payslip.run.tree.inherit.pappaya</field>
        <field name="model">hr.payslip.run</field>
        <field name="inherit_id" ref="hr_payroll.hr_payslip_run_tree"/>
        <field name="arch" type="xml">
            <field name="journal_id" position="replace">
                <field name="journal_id" invisible="1"/>
            </field>
            <field name="name" position="after">
            	 <field name="branch_id" />
           	</field>
           	<field name="credit_note" position="replace">
           		<field name="credit_note" invisible="1"/>
           	</field>
        </field>
    </record>

   
   <record id="hr_payroll.hr_payslip_run_form" model="ir.ui.view">
        <field name="name">hr.payslip.run.form</field>
        <field name="model">hr.payslip.run</field>
        <field name="arch" type="xml">
            <form string="Payslips Batches">
            <header>
                <button name="close_payslip_run" type="object" string="Confirm" class="oe_highlight"
                	attrs="{'invisible':['|',('slip_ids','=',[]),('state','=','close')]}"/>
                	<button name="compute_sheet" type="object" string="Generate Payslips" class="oe_highlight" attrs="{'invisible':[('state','!=','draft')]}"/>
<!--                 <button name="compute_sheet" type="object" string="Generate Payslips" class="oe_highlight" attrs="{'invisible':['|',('is_sublock_created','!=',True),('state','!=','draft')]}"/>
 --><!--                 <button string="Set to Draft" name="draft_payslip_run" type="object" states="close" />
 -->                <field name="state" widget="statusbar"/>
            </header>
            <sheet>
                <label for="name" class="oe_edit_only"/>
                <h1>
                    <field name="name" string="Payslip Batch Name"/>
                </h1>
                <group col="4">
                    <label for="date_start" string="Period"/>
                     <div>
                           <field name="date_start" class="oe_inline"/> - <field name="date_end" class="oe_inline"/>
                     </div>
                    <field name="credit_note" invisible="1"/>
                    <field name="is_sublock_created" invisible="1"/>
                </group>
               
                <field name="slip_ids" readonly="1"/>
            </sheet>
            </form>
        </field>
    </record>
   
    <record id="hr_payslip_run_form_inheri_pappaya" model="ir.ui.view">
        <field name="name">hr.payslip.run.form.inherit.pappaya</field>
        <field name="model">hr.payslip.run</field>
        <field name="inherit_id" ref="hr_payroll.hr_payslip_run_form"/>
        <field name="arch" type="xml">
            <field name="credit_note" position="before">
                <field name="branch_id" required="1"/>
            </field>
            <field name="state" position="before">
                <button name="send_email_bulk" type="object" string="Send Mail" class="oe_highlight"/>
            </field>
            <field name="journal_id" position="replace">
                    <field name="journal_id" required="0" invisible="1"/>
            </field>
        </field>
    </record>

    <record id="hr_salary_rule_inherit_list" model="ir.ui.view">
        <field name="name">hr.salary.rule.inherit.list</field>
        <field name="model">hr.salary.rule</field>
        <field name="inherit_id" ref="hr_payroll.hr_salary_rule_list"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='sequence']" position="replace">
                <field name="sequence"/>
            </xpath>
        </field>
    </record>
    
    
    
    <record id="pappaya_hr_salary_rule_inherit_form" model="ir.ui.view">
        <field name="name">hr.salary.rule.inherit.form1</field>
        <field name="model">hr.salary.rule</field>
        <field name="inherit_id" ref="hr_payroll.hr_salary_rule_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='company_id']" position="replace">
                <field name="company_id" invisible="1"/>
                 <field name="is_statutory" />
            </xpath>
            <xpath expr="//form" position="attributes">
                <attribute name="duplicate">0</attribute>
            </xpath>
        </field>
    </record>
    
    
    <record id="view_hr_payslip_by_employees_inherit" model="ir.ui.view">
        <field name="name">hr_payroll_payslip_employees_inherit</field>
        <field name="model">hr.payslip.employees</field>
        <field name="inherit_id" ref="hr_payroll.view_hr_payslip_by_employees"/>
        <field name="arch" type="xml">
            <xpath expr="//form//group[1]" position="replace">
                <group>
                    <label colspan="4" nolabel="1" string="This wizard will generate payslips for all employee(s) based on the dates and company specified on Payslips Run." />
                </group>
            </xpath>
            <xpath expr="//form//group[2]" position="replace">
                <field name="employee_ids" invisible="1"/>
                <footer></footer>
            </xpath>
        </field>
    </record>

    <record id="hr_payroll.action_view_hr_payslip_form" model="ir.actions.act_window">
        <field name="name">Employee Payslips</field>
        <field name="res_model">hr.payslip</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{'group_by':['date_from','branch_id']}</field>
        <field name="search_view_id" ref="hr_payroll.view_hr_payslip_filter"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to create a new Employee Payslip.
            </p>
        </field>
    </record>
    
	<menuitem action="hr_payroll.action_view_hr_payslip_form" id="hr_payroll.menu_department_tree" parent="hr_payroll.menu_hr_payroll_root" groups="hr_payroll.group_hr_payroll_user,base.group_user"/>

    <!--Employee Payslips Tree View-->

    <record id="hr_payroll.view_hr_payslip_tree" model="ir.ui.view">
        <field name="name">hr.payslip.tree</field>
        <field name="model">hr.payslip</field>
        <field name="arch" type="xml">
            <tree decoration-info="state in ('confirm','hr_check','accont_check')" decoration-muted="state == 'cancel'" string="Payslips">
                <field name="company_id" options="{'no_create': True}" string="Branch" invisible="1"/>
                <field name="branch_id" options="{'no_create': True}" string="Branch"/>
                <field name="number"/>
                <field name="emp_no"/>
                <field name="employee_id"/>
                <!--<field name="name"/>-->
                <!--<field name="date_from"/>-->
                <!--<field name="date_to"/>-->
                <field name="month_name"/>
                <field name="paid_days" string="Total Worked Days"/>
                <field name="gross_amount"/>
                <field name="basic_amount"/>
                <field name="hra_amount"/>
                <field name="da_amount"/>
                <field name="lop_amount"/>
                <field name="pf_amount"/>
                <field name="pt_amount"/>
                <field name="esi_amount"/>
                <field name="loan_amount"/>
                <field name="net_amount"/>
                <field name="payslip_run_id" invisible="1"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <!--Employee Payslips Search View-->

    <record id="view_hr_payslip_filter_inherit" model="ir.ui.view">
        <field name="name">view.hr.payslip.filter.inherit</field>
        <field name="model">hr.payslip</field>
        <field name="inherit_id" ref="hr_payroll.view_hr_payslip_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='employee_id']" position="before">
                <field name="emp_no"/>
            </xpath>
             <xpath expr="//filter[@name='employee_id']" position="before">
                <filter string="Month" name="month" groups="base.group_multi_company" context="{'group_by':'date_from'}"/>
            </xpath>
            <xpath expr="//filter[@name='company_id']" position="replace">
                <filter string="Branch" name="branch_id" groups="base.group_multi_company" context="{'group_by':'branch_id'}"/>
            </xpath>
        </field>
    </record>

    <!--Salary Structure Tree View-->

    <record id="hr_payroll.view_hr_payroll_structure_list_view" model="ir.ui.view">
        <field name="name">hr.payroll.structure.tree</field>
        <field name="model">hr.payroll.structure</field>
        <field name="arch" type="xml">
            <tree string="Employee Function">
                <field name="company_id" options="{'no_create': True}"/>
                <field name="name" size="100"/>
                <field name="rule_ids"/>
            </tree>
        </field>
    </record>

    <!--Salary Structure Action View-->

    <record id="hr_payroll.action_view_hr_payroll_structure_list_form" model="ir.actions.act_window">
        <field name="name">Salary Structures</field>
        <field name="res_model">hr.payroll.structure</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to configure Salary Structure.
            </p>
        </field>
    </record>

    <!--Salary Rule Categories Action View-->

    <record id="hr_payroll.action_hr_salary_rule_category" model="ir.actions.act_window">
        <field name="name">Salary Rule Categories</field>
        <field name="res_model">hr.salary.rule.category</field>
        <field name="view_type">form</field>
        <field name="view_id" ref="hr_payroll.hr_salary_rule_category_tree"/>
        <field name="search_view_id" ref="hr_payroll.view_hr_salary_rule_category_filter"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to configure Salary Rule Category.
            </p>
        </field>
    </record>

    <!--Salary Rule Action View-->

    <record id="hr_payroll.action_salary_rule_form" model="ir.actions.act_window">
        <field name="name">Salary Rules</field>
        <field name="res_model">hr.salary.rule</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="domain">[('parent_rule_id','=',False)]</field>
        <field name="search_view_id" ref="hr_payroll.view_hr_rule_filter"/>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to configure Salary Rule.
            </p>
        </field>
    </record>

    <menuitem id="hr_payroll.menu_hr_payroll_configuration" name="Configuration" parent="hr_payroll.menu_hr_payroll_root"
        sequence="100" groups="pappaya_base.hr_executives,pappaya_base.hr_operations_head,pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
        
    <menuitem action="hr_payroll.action_hr_payslip_run_tree" id="hr_payroll.menu_hr_payslip_run" parent="hr_payroll.menu_hr_payroll_root" groups="base.group_no_one"/>

    <menuitem
        id="hr_payroll.menu_hr_payroll_structure_view"
        action="hr_payroll.action_view_hr_payroll_structure_list_form"
        parent="hr_payroll.menu_hr_payroll_configuration"
        sequence="2"
        groups="pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"
    />

    <menuitem id="hr_payroll.menu_action_hr_salary_rule_form" action="hr_payroll.action_salary_rule_form" parent="hr_payroll.menu_hr_payroll_configuration"
              sequence="12" groups="pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>

    <menuitem
        id="hr_payroll.menu_hr_salary_rule_category"
        action="hr_payroll.action_hr_salary_rule_category"
        parent="hr_payroll.menu_hr_payroll_configuration"
        sequence="11"
        groups="base.group_no_one,pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"
    />
	
	</data>
</odoo>
