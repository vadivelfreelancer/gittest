<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

		<template id="dis_fee_layout">
         <!-- Multicompany -->
            <t t-if="not o and doc">
                <t t-set="o" t-value="doc"/>
            </t>
            <t t-if="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id"/>
            </t>
            <t t-if="not o or not 'company_id' in o">
                <t t-set="company" t-value="res_company"/>
            </t>
            <t t-raw="0" />
        </template>

		<!--Original-->
        <template id="report_original_fee_refund_receipt">
            <t t-call="report.html_container">
			<t t-set="data_report_dpi" t-value="110"/>
				<div style ="width:50%">
			       	<t t-foreach="docs" t-as="doc">
						<t t-call="pappaya_fees.dis_fee_layout">
							<div class="page">
								<!--Header-->
								<t t-foreach="doc.get_school()" t-as="o">
									<table style="width:100%;">
										<tr style="width:100%;">
											<t t-foreach="[1]" t-as="record111">
												<td style="width:50%;">
												<div class="row">
													<div class="col-xs-2"/>
													<div class="col-xs-9" style="text-align:right;font-size:15px;">
														<strong>Office Copy</strong>
													</div>
												</div>
												</td>
											</t>
											<t t-foreach="[2]" t-as="record111">
												<td style="width:50%;">
												<div class="row">
													<div class="col-xs-2"/>
													<div class="col-xs-9" style="text-align:right;font-size:15px;">
														<strong>Student Copy</strong>
													</div>
												</div>
												</td>
											</t>
										</tr>
									</table>
									<table style="width:100%;">
										<tr style="width:100%;">
											<t t-foreach="[1,2]" t-as="record111">
												<td style="width:50%;">
													<div class="row">
														<div class="col-xs-2">
															<img t-att-src="'data:image/png;base64,%s' % o['logo']"
															style="height:80px; max-height:90px; width:80px; max-width:90px; margin-left:20px;"/>
														</div>
														<div class="col-xs-9">
															<div style="font-weight:500;font-size:15px; text-align:center;">
																<t t-if="o['school_id']"> <strong><span t-esc="o['school_id']"/></strong></t>
															</div>
															<div style="font-size:10px; text-align:center;">
																<t t-if="o['street']"> <span t-esc="o['street']"/>,</t>
																<t t-if="o['street2']"> <span t-esc="o['street2']"/></t>,
																<t t-if="o['city']"> <span t-esc="o['city']"/> </t>-
																<t t-if="o['zip']"> <span t-esc="o['zip']"/></t>
															</div>
															<div style="font-size:10px; text-align:center;">
																<t t-if="o['phone']"> Tel: <span t-esc="o['phone']"/>,</t>
																<t t-if="o['fax']"> Fax: <span t-esc="o['fax']"/></t> <br/>
																<t t-if="o['email']"> Email: <span t-esc="o['email']"/></t>
															</div>
															<div style="font-size:10px; text-align:center;">
																<t t-if="o['website']"><span t-esc="o['website']"/></t>
															</div>
														</div>
													</div>
												</td>
											</t>
										</tr>
									</table>
								</t>
								<br/>
								<!--Content-->
								<table style="width:100%;">
									<tr style="width:100%;">
										<t t-foreach="[1,2]" t-as="record111">
											<td style="width:45%;">
												<table class="table table-condensed table-bordered" style="border:2px solid black;font-size:10px;">
													<thead>
														<th colspan="6" syle="border:2px solid black;height:2%;"><center><b> Refund Receipt</b></center></th>
													</thead>
													<tbody class="fee_tbody">
														<t t-if="request.env['pappaya.enquiry'].search([('name','=',doc.student_id.name)])">
															<t t-if="not request.env['pappaya.student'].search([('name','=',doc.student_id.name)])">
																<t t-foreach="request.env['pappaya.enquiry'].search([('name','=',doc.student_id.name)], limit=1)" t-as="pe">
																	<tr>
																		<td>STUDENT ID</td>
																		<td>:</td>
																		<td><t t-esc="pe.enrollment_number"/></td>
																		<td></td>
																		<td></td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>STUDENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="pe.student_first_name"/></td>
																		<td>DATE</td>
																		<td>:</td>
																		<td>
																			<t t-if="doc.refund_date">
																			<span t-esc="time.strftime('%d/%m/%Y', time.strptime(doc.refund_date,'%Y-%m-%d'))" />
																			</t>
																		</td>
																	</tr>
																	<tr>
																		<td>PARENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="pe.father_name"/></td>
																		<td>GRADE</td>
																		<td>:</td>
																		<td><t t-esc="pe.grade_id.name"/></td>
																	</tr>
																</t>
															</t>
														</t>
														<t t-if="request.env['pappaya.student'].search([('name','=',doc.student_id.name)])">
															<t t-if="not request.env['pappaya.enquiry'].search([('name','=',doc.student_id.name)])">
																<t t-foreach="request.env['pappaya.student'].search([('name','=',doc.student_id.name)], limit=1)" t-as="ps">
																	<tr>
																		<td>STUDENT ID</td>
																		<td>:</td>
																		<td><t t-esc="ps.enrollment_num"/></td>
																		<td></td>
																		<td></td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>STUDENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="ps.name"/> <t t-esc="ps.middle_name"/> <t t-esc="ps.last_name"/></td>
																		<td>DATE</td>
																		<td>:</td>
																		<td>
																			<t t-if="doc.refund_date">
																			<span t-esc="time.strftime('%d/%m/%Y', time.strptime(doc.refund_date,'%Y-%m-%d'))" />
																			</t>
																		</td>
																	</tr>
																		<tr>
																		<td>PARENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="ps.father_name"/></td>
																		<td>GRADE</td>
																		<td>:</td>
																		<td><t t-esc="doc.grade_id.name"/></td>
																	</tr>
																</t>
															</t>
														</t>
													</tbody>
												</table>
												<table class="table table-condensed table-bordered" style="border:2px solid black;font-size:10px;">
													<thead>
														<th colspan="4" style="border:2px solid black;"><center><b>Payment Details</b></center></th>
													</thead>
													<tr>
														<td><b>Name</b></td>
														<td><b>Term</b></td>
														<td style="text-align:right;"><b>Amount</b></td>
														<td></td>
													</tr>
													<tbody class="fee_tbody">
														<t t-if="doc.fee_refund_line">
															<t t-foreach="doc.fee_refund_line" t-as="ln">
																<tr>
																	<td><span t-esc="ln.name"/></td>
																	<td><span t-esc=" ln.term_divide"/></td>
																	<td style="text-align:right;"><span t-esc=" '%.2f' % ln.amount"/></td>
																	<td></td>
																</tr>
															</t>
														 </t>
													</tbody>
													<tr>
														<td/>
														<td style="text-align:right;"><b>Total:</b></td>
														<td style="text-align:right;"><b><span t-esc=" '%.2f' % doc.total"/></b></td>
														<td/>
													</tr>
												</table>
												<div class="row">
													<div class="col-xs-12 pull-left">
														<table style="font-size:10px;height:2%">
															<tr>
															    <td><strong>Mode Of Payment</strong></td>
															    <td style="padding:5px 5px 5px 5px;">:</td>
																<td><span t-esc="doc.payment_mode"/>
																</td>
															</tr>
															<tr>
															    <td><strong>CHQ/DD/POS/Ref.No</strong></td>
															    <td style="padding:5px 5px 5px 5px;">:</td>
															    <td><span t-esc="doc.cheque_dd"/></td>
															</tr>
														</table>
													</div>
												</div>
											</td>
											<td>
												<![CDATA[&nbsp;]]><![CDATA[&nbsp;]]><![CDATA[&nbsp;]]>
											</td>
										</t>
									</tr>
								</table>
							</div>
							<!--Footer-->
							<div class="footer">
								<table style="width:100%;">
									<tr>
										<t t-foreach="[1,2]" t-as="record111">
											<td style="width:45%;">
												<div style="text-align:left;">
													<div style="font-size:8px;margin-bottom:9px">
															<strong style="font-size:9px;">This is system generated receipt does not required seal &amp; sign.</strong><br/>
															<strong style="font-size:9px;">For any queries, contact 18004189678</strong>
													</div>
												</div>
												<table>
													<thead>
														<tr>
															<td class="col-xs-3 pull-left" style="font-size:9px;">
																<strong>Dated On: </strong> <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y')"/>
															</td>
															<td class="col-xs-2 pull-right" style="font-size:9px;">
																<strong>Generated By: </strong> <span t-esc="user.name"/>
															</td>
														</tr>
													</thead>
												</table>
												<div class="col-xs-3 pull-right" style="font-size:9px;">
													<ul class="list-inline">
														<li>Page</li>
														<li><span class="page"/></li>
														<li>of</li>
														<li><span class="topage"/></li>
													</ul>
												</div>
											</td>
										</t>
									</tr>
								</table>
							</div>
					    </t>
					</t>
				</div>
			</t>
		</template>

		<!--Duplicate-->
		<template id="report_duplicate_fee_refund_receipt">
            <t t-call="report.html_container">
			<t t-set="data_report_dpi" t-value="110"/>
				<div style ="width:50%">
			       	<t t-foreach="docs" t-as="doc">
						<t t-call="pappaya_fees.dis_fee_layout">
							<div class="page">
								<!--Header-->
								<t t-foreach="doc.get_school()" t-as="o">
									<table style="width:100%;">
										<tr style="width:100%;">
											<t t-foreach="[1]" t-as="record111">
												<td style="width:50%;">
												<div class="row">
													<div class="col-xs-2"/>
													<div class="col-xs-9" style="text-align:right;font-size:15px;">
														<strong>Duplicate Refund Receipt - Office Copy</strong>
													</div>
												</div>
												</td>
											</t>
											<t t-foreach="[2]" t-as="record111">
												<td style="width:50%;">
												<div class="row">
													<div class="col-xs-2"/>
													<div class="col-xs-9" style="text-align:right;font-size:15px;">
														<strong>Duplicate Refund Receipt - Student Copy</strong>
													</div>
												</div>
												</td>
											</t>
										</tr>
									</table>
									<br/>
									<table style="width:100%;">
										<tr style="width:100%;">
											<t t-foreach="[1,2]" t-as="record111">
												<td style="width:50%;">
													<div class="row">
														<div class="col-xs-2">
															<img t-att-src="'data:image/png;base64,%s' % o['logo']"
															style="height:80px; max-height:90px; width:80px; max-width:90px; margin-left:20px;"/>
														</div>
														<div class="col-xs-9">
															<div style="font-weight:500;font-size:15px; text-align:center;">
																<t t-if="o['school_id']"> <strong><span t-esc="o['school_id']"/></strong></t>
															</div>
															<div style="font-size:10px; text-align:center;">
																<t t-if="o['street']"> <span t-esc="o['street']"/>,</t>
																<t t-if="o['street2']"> <span t-esc="o['street2']"/></t>,
																<t t-if="o['city']"> <span t-esc="o['city']"/> </t>-
																<t t-if="o['zip']"> <span t-esc="o['zip']"/></t>
															</div>
															<div style="font-size:10px; text-align:center;">
																<t t-if="o['phone']"> Tel: <span t-esc="o['phone']"/>,</t>
																<t t-if="o['fax']"> Fax: <span t-esc="o['fax']"/></t> <br/>
																<t t-if="o['email']"> Email: <span t-esc="o['email']"/></t>
															</div>
															<div style="font-size:10px; text-align:center;">
																<t t-if="o['website']"><span t-esc="o['website']"/></t>
															</div>
														</div>
													</div>
												</td>
											</t>
										</tr>
									</table>
								</t>
								<br/>
								<!--Content-->
								<table style="width:100%;">
									<tr style="width:100%;">
										<t t-foreach="[1,2]" t-as="record111">
											<td style="width:45%;">
												<table class="table table-condensed table-bordered" style="border:2px solid black;font-size:10px;">
													<thead>
														<th colspan="6" style="border:2px solid black;height:2%;"><center><b> Refund Receipt</b></center></th>
													</thead>
													<tbody class="fee_tbody">
														<t t-if="request.env['pappaya.enquiry'].search([('name','=',doc.student_id.name)])">
															<t t-if="not request.env['pappaya.student'].search([('name','=',doc.student_id.name)])">
																<t t-foreach="request.env['pappaya.enquiry'].search([('name','=',doc.student_id.name)], limit=1)" t-as="pe">
																	<tr>
																		<td>STUDENT ID</td>
																		<td>:</td>
																		<td><t t-esc="pe.enrollment_number"/></td>
																		<td></td>
																		<td></td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>STUDENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="pe.student_first_name"/></td>
																		<td>DATE</td>
																		<td>:</td>
																		<td>
																			<t t-if="doc.refund_date">
																			<span t-esc="time.strftime('%d/%m/%Y', time.strptime(doc.refund_date,'%Y-%m-%d'))" />
																			</t>
																		</td>
																	</tr>
																	<tr>
																		<td>PARENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="pe.father_name"/></td>
																		<td>GRADE</td>
																		<td>:</td>
																		<td><t t-esc="pe.grade_id.name"/></td>
																	</tr>
																</t>
															</t>
														</t>
														<t t-if="request.env['pappaya.student'].search([('name','=',doc.student_id.name)])">
															<t t-if="not request.env['pappaya.enquiry'].search([('name','=',doc.student_id.name)])">
																<t t-foreach="request.env['pappaya.student'].search([('name','=',doc.student_id.name)], limit=1)" t-as="ps">
																	<tr>
																		<td>STUDENT ID</td>
																		<td>:</td>
																		<td><t t-esc="ps.enrollment_num"/></td>
																		<td></td>
																		<td></td>
																		<td></td>
																	</tr>
																	<tr>
																		<td>STUDENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="ps.name"/> <t t-esc="ps.middle_name"/> <t t-esc="ps.last_name"/></td>
																		<td>DATE</td>
																		<td>:</td>
																		<td>
																			<t t-if="doc.refund_date">
																			<span t-esc="time.strftime('%d/%m/%Y', time.strptime(doc.refund_date,'%Y-%m-%d'))" />
																			</t>
																		</td>
																	</tr>
																		<tr>
																		<td>PARENT NAME</td>
																		<td>:</td>
																		<td><t t-esc="ps.father_name"/></td>
																		<td>GRADE</td>
																		<td>:</td>
																		<td><t t-esc="doc.grade_id.name"/></td>
																	</tr>
																</t>
															</t>
														</t>
													</tbody>
												</table>
												<table class="table table-condensed table-bordered" style="border:2px solid black;font-size:10px;">
													<thead>
														<th colspan="4" style="border:2px solid black;"><center><b>Payment Details</b></center></th>
													</thead>
													<tr>
														<td><b>Name</b></td>
														<td><b>Term</b></td>
														<td style="text-align:right;"><b>Amount</b></td>
														<td></td>
													</tr>
													<tbody class="fee_tbody">
														<t t-if="doc.fee_refund_line">
															<t t-foreach="doc.fee_refund_line" t-as="ln">
																<tr>
																	<td><span t-esc="ln.name"/></td>
																	<td><span t-esc=" ln.term_divide"/></td>
																	<td style="text-align:right;"><span t-esc=" '%.2f' % ln.amount"/></td>
																	<td></td>
																</tr>
															</t>
														 </t>
													</tbody>
													<tr>
														<td/>
														<td style="text-align:right;"><b>Total:</b></td>
														<td style="text-align:right;"><b><span t-esc=" '%.2f' % doc.total"/></b></td>
														<td/>
													</tr>
												</table>
												<div class="row">
													<div class="col-xs-12 pull-left">
														<table style="font-size:10px;height:2%">
															<tr>
																<td><strong>In words</strong></td>
																<td style="padding:5px 5px 5px 5px;">:</td>
																<td><span t-esc="doc.amount_to_text_in(doc.total,doc.school_id.currency_id)"/></td>
															</tr>
															<tr>
															    <td><strong>Mode Of Payment</strong></td>
															    <td style="padding:5px 5px 5px 5px;">:</td>
																<td><span t-esc="doc.payment_mode"/>
																</td>
															</tr>
															<tr>
															    <td><strong>CHQ/DD/POS/Ref.No</strong></td>
															    <td style="padding:5px 5px 5px 5px;">:</td>
															    <td><span t-esc="doc.cheque_dd"/></td>
															</tr>
														</table>
													</div>
												</div>
											</td>
											<td>
												<![CDATA[&nbsp;]]><![CDATA[&nbsp;]]><![CDATA[&nbsp;]]>
											</td>
										</t>
									</tr>
								</table>
							</div>
							<!--Footer-->
							<div class="footer">
								<table style="width:100%;">
									<tr>
										<t t-foreach="[1,2]" t-as="record111">
											<td style="width:45%;">
												<div style="text-align:left;">
													<div style="font-size:8px;margin-bottom:9px">
														<strong style="font-size:9px;">This is system generated receipt does not required seal &amp; sign.</strong><br/>
														<strong style="font-size:9px;">For any queries, contact 18004189678</strong>
													</div>
												</div>
												<table>
													<thead>
														<tr>
															<td class="col-xs-3 pull-left" style="font-size:9px;">
																<strong>Dated On: </strong> <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y')"/>
															</td>
															<td class="col-xs-2 pull-right" style="font-size:9px;">
																<strong>Generated By: </strong> <span t-esc="user.name"/>
															</td>
														</tr>
													</thead>
												</table>
												<div class="col-xs-3 pull-right" style="font-size:9px;">
													<ul class="list-inline">
														<li>Page</li>
														<li><span class="page"/></li>
														<li>of</li>
														<li><span class="topage"/></li>
													</ul>
												</div>
											</td>
										</t>
									</tr>
								</table>
							</div>
					    </t>
					</t>
				</div>
			</t>
		</template>

		<report
            id="print_fee_refund_receipt_original"
            model="pappaya.fees.refund"
            string="Fees Refund Receipt"
            report_type="qweb-pdf"
            name="pappaya_fees.report_original_fee_refund_receipt"
            file="pappaya_fees.report_original_fee_refund_receipt"
            attachment_use="False"
            menu="False"
        />
		
		<!-- <record id="pappaya_fees.print_fee_refund_receipt_original" model="ir.actions.report.xml">
	        <field name="paperformat_id" ref="pappaya_core.paperformat_euro_landscape"/>
    	</record> -->
		
		
	  <report
            id="print_fee_refund_receipt_duplicate"
            model="pappaya.fees.refund"
            string="Fees Refund Receipt"
            report_type="qweb-pdf"
            name="pappaya_fees.report_duplicate_fee_refund_receipt"
            file="pappaya_fees.report_duplicate_fee_refund_receipt"
            attachment_use="False"
            menu="False"
        />

		<!-- <record id="pappaya_fees.print_fee_refund_receipt_duplicate" model="ir.actions.report.xml">
	        <field name="paperformat_id" ref="pappaya_core.paperformat_euro_landscape"/>
    	</record> -->


    </data>
</openerp>
