<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
		<template id="student_report_fee_collect_summary_receipt">
			<t t-call="report.html_container">
				<t t-set="data_report_margin_top" t-value="40"/>
				<t t-set="data_report_dpi" t-value="90"/>
				<t t-foreach="docs" t-as="o">
					<t t-foreach="o.get_school_header()" t-as="l">
                        <div class="header">
                            <div class="row">
                                <div class="col-xs-2" style="text-align:center;">
                                    <img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % res_company.logo" style="height:110px;max-height:130px;width:110px;max-width:130px;margin-left:20px;"/>
                                </div>
                                <div class="col-xs-10">
                                    <div style="font-weight:700;font-size:20px; text-align:center;">
                                        <t t-if="l['school_id']"> <strong><span t-esc="l['school_id']"/></strong></t>
                                    </div>
                                    <div style="font-size:15px; text-align:center;">
                                        <t t-if="l['street']"> <span t-esc="l['street']"/>,</t>
                                        <t t-if="l['street2']"> <span t-esc="l['street2']"/>,</t>
                                        <t t-if="l['city']"> <span t-esc="l['city']"/> </t>-
                                        <t t-if="l['zip']"> <span t-esc="l['zip']"/></t>
                                    </div>
                                    <div style="font-size:15px; text-align:center;">
                                        <t t-if="l['phone']"> Tel: <span t-esc="l['phone']"/>,</t>
                                        <t t-if="l['fax']"> Fax: <span t-esc="l['fax']"/>,</t>
                                        <t t-if="l['email']"> Email: <span t-esc="l['email']"/></t>
                                    </div>
                                    <div style="font-size:14px; text-align:center;">
                                        <t t-if="l['website']"> Website: <span t-esc="l['website']"/></t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                    <t t-foreach="o.get_school()" t-as="soc">
                        <div class="header">
                            <div class="row">
                                <div class="col-xs-2" style="text-align:center;">
                                    <img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % res_company.logo" style="height:110px;max-height:130px;width:110px;max-width:130px;margin-left:20px;"/>
                                </div>
                                <div class="col-xs-10">
                                    <br/><br/>
                                    <div style="font-weight:600;font-size:22px;text-align:center;">
                                        <t t-if="soc['school_id']"> <strong><span t-esc="soc['school_id']"/></strong></t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
					<div class="page">
						<style>
							.row1 {
								text-align:center;
								font-size:18px;
								border-top:1px solid black;
								padding-top:10px;
								padding-bottom:30px
								}
							.row2 {
								text-align:left;
								font-size:16px;
								padding-bottom:5px
								}
							.table-condensed {
								width:100%;
								border:1px solid black;
								font-size:16px;
								}
							.result1 td {
								text-align:center;
								vertical-align:middle;
								border-right:1px solid black;
								border-bottom:1px solid black;
								}
							.result2 td {
								text-align:center;
								vertical-align:middle;
								border-right:1px solid black;
								border-bottom:1px solid black;
								}
						</style>
						<!--<div class="DIS_watermark_report"/>-->
						<div class="row1">
							<strong>Student Fee Collection Details</strong>
						</div>
						<div class="text-center">
							<strong>For the period of <span t-esc="time.strftime('%d/%b/%Y', time.strptime(o.from_date,'%Y-%m-%d'))"/> To <span t-esc="time.strftime('%d/%b/%Y', time.strptime(o.to_date,'%Y-%m-%d'))"/></strong>
						</div>
						<div>
							<table class="table-condensed">
								<thead>
								<tr class="result1">
									<td><strong>S.No</strong></td>
									<td><strong>Branch</strong></td>
									<td><strong>Class</strong></td>
									<td><strong>Section</strong></td>
									<td><strong>Enrollment No</strong></td>
									<td><strong>Student</strong></td>
									<td><strong>Fees Head</strong></td>
									<td><strong>Total Amount</strong></td>
									
								</tr>
								</thead>
								<tbody>
								<t t-set="reg" t-value="0" />
								<t t-set="adm" t-value="0" />
								<t t-set="tut" t-value="0" />
								<t t-set="total_total" t-value="0" />
								<t t-foreach="o.get_data()" t-as="l">
									<tr class="result2">
									<td class="text-center"><span t-esc="l['s_no']"/></td>
									<td class="text-center"><span t-esc="l['school']"/></td>
									<td class="text-center"><span t-esc="l['class']"/></td>
									<td class="text-center"><span t-esc="l['section']"/></td>
									<td class="text-center"><span t-esc="l['student_no']"/></td>
									<td class="text-center"><span t-esc="l['student']"/></td>

									<td class="text-center">
										<span t-esc=" '%.2f' % l['reg']"/>
										<t t-set="reg" t-value="reg+l['reg']" />
									</td>
									<td class="text-center">
										<span t-esc=" '%.2f' % l['total']"/>
										 <t t-set="total_total" t-value="total_total+l['total']" />
									</td>
									</tr>
								</t>
								<tr class="result2">
									<td class="text-right" colspan="7"><strong>Total</strong></td>
									<td class="text-center"><t t-esc=" '%.2f' % reg"/></td>
									<td class="text-center"><t t-esc=" '%.2f' % total_total"/></td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="footer">
						<table>
							<thead>
								<tr>
									<td class="col-xs-5 pull-left" style="font-size:16px;">
										<strong>Dated On: </strong> <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%b/%Y %H:%M:%S')"/>
									</td>
									<td class="col-xs-2 pull-right" style="font-size:16px;">
										<strong>Generated By: </strong> <span t-esc="user.name"/>
									</td>
								</tr>
							</thead>
						</table>
					</div>
				</t>
			</t>
		</template>

		<record id="paperformat_euro_landscape_fees" model="report.paperformat">
			<field name="name">European A4 - Landscape</field>
			<field name="default" eval="True" />
			<field name="format">A4</field>
			<field name="page_height">0</field>
			<field name="page_width">0</field>
			<field name="orientation">Landscape</field>
			<field name="margin_top">10</field>
			<field name="margin_bottom">10</field>
			<field name="margin_left">7</field>
			<field name="margin_right">7</field>
			<field name="header_line" eval="False" />
			<field name="header_spacing">35</field>
			<field name="dpi">90</field>
		</record>

		<report
			id="print_student_fee_collection_summary_details"
			model="student.fee.collection.summary"
			string="Student Fee Collection Details"
			report_type="qweb-pdf"
			name="pappaya_fees.student_report_fee_collect_summary_receipt"
			file="pappaya_fees.student_report_fee_collect_summary_receipt"
			attachment_use="False"
		/>

		<!-- <record id="print_student_fee_collection_summary_details" model="ir.actions.report.xml">
			<field name="paperformat_id" ref="pappaya_fees.paperformat_euro_landscape_fees"/>
		</record> -->

    </data>
</odoo>


