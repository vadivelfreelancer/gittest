<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		
		<record id="pappaya_fees_head_tree" model="ir.ui.view">
			<field name="name">pappaya_fees_head_tree</field>
			<field name="model">pappaya.fees.head</field>
			<field name="arch" type="xml">
				<tree string="Fees Head">
					<field name="name" />
					<field name="fee_type"/>
					<field name="code" />
					<field name="residential_type_ids" />
					<field name="gender" />
					<field name="entity_id"/>
					<field name="is_compulsory_fee"/>
					<field name="is_course_fee"/>
					<field name="is_reservation_fee"/>
					<field name="is_material_fee"/>
					<field name="is_uniform_fee"/>
					<field name="is_transport_fee"/>
					<field name="is_caution_deposit_fee"/>
					<field name="is_nslate_fee"/>
					<field name="is_refundable_fee"/>
					<field name="school_id" invisible="1"/>
					<field name="product_id" invisible="1"/>
					<field name="credit_account_id" invisible="1"/>
					<field name="debit_account_id" invisible="1"/>
					<field name="journal_id" invisible="1"/>
				</tree>
			</field>
		</record>
		
		<record id="pappaya_fees_head_form" model="ir.ui.view">
			<field name="name">pappaya.fees.head.form</field>
			<field name="model">pappaya.fees.head</field>
			<field name="arch" type="xml">
				<form string="Fees Head">
					<sheet>
						<group>
							<group>
								<field name="fee_type" required="1"/>
								<field name="name" required="1"/>
								<field name="code" required="1"/>
								<field name="entity_id" domain="[('type','=','entity')]" options="{'no_open': True,'no_create':True}" 
									attrs="{'invisible':[('is_material_fee','=',False)],'required':[('is_material_fee','=',True)]}"/>
							</group>
							<group>
								<field name="residential_type_ids" required="1" widget="many2many_tags" options="{'no_open': True, 'no_create': True}"/>
								<field name="gender" required="1"/>
								<field name="medium_ids" required="1" domain="[('type','=','medium')]" widget="many2many_tags" options="{'no_open': True, 'no_create': True}" context="{'master_type':'others','individual_master_type':'medium'}" />
								<field name="credit_account_id" string="Credit Account" options="{'no_open': True,'no_create':True}" required="1"/>
								<field name="debit_account_id" string="Debit Account" options="{'no_open': True,'no_create':True}" required="1"/>
							</group>
						</group>
						<group string="Fee Options">
							<group>
								<field name="is_show_by_default" />
								<field name="is_compulsory_fee"/>
								<field name="is_course_fee"/>
								<field name="is_reservation_fee"/>
								<field name="is_material_fee"/>
								<field name="is_caution_deposit_fee"/>
								<field name="is_pocket_money"/>
							</group>
							<group>
								<field name="is_transport_fee"/>
								<field name="is_uniform_fee"/>
								<field name="is_nslate_fee"/>
								<field name="is_soa_fee"/>
								<field name="is_refundable_fee" attrs="{'invisible': [('is_reservation_fee','=', True)]}"/>
								<field name="is_library_fee" />
								<field name="is_other_payment" />
								<field name="is_course_fee_component" />
							</group>
							<group invisible="1">
								<field name="school_id" options="{'no_open': True,'no_create':True}" invisible="1"/>
								<field name="product_id" invisible="1"/>
								<field name="journal_id" invisible="1"/>
							</group>
						</group>
						<notebook attrs="{'invisible':[('is_other_payment','=',False)]}">
							<page string="Sub Head Details">
								<field name="pappaya_fees_sub_head_ids">
									<tree editable="bottom">
										<field name="name" required="1"/>
										<field name="description"/>
									</tree>
								</field>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_pappaya_fee_head_search" model="ir.ui.view">
			<field name="name">pappaya.fees.head_search</field>
			<field name="model">pappaya.fees.head</field>
			<field name="type">search</field>
			<field name="priority" eval="8"/>
			<field name="arch" type="xml">
				<search string="">
					<field name="name" />
					<field name="code" />
					<field name="fee_type"/>
					<field name="student_type" />
					<field name="gender" />
					<field name="is_compulsory_fee"/>
					<field name="is_course_fee"/>
					<field name="is_reservation_fee"/>
					<field name="is_transport_fee"/>
					<field name="is_caution_deposit_fee"/>
					<field name="is_refundable_fee"/>
					<newline/>
					<group expand="0" string="Group By...">
                        <filter string="Fee Head" name="name" domain="[]" context="{'group_by':'name'}"/>
                        <filter string="Academic Year" name="code" domain="[]" context="{'group_by':'code'}"/>
						<filter string="Type" name="fee_type" domain="[]" context="{'group_by':'fee_type'}"/>
						<filter string="Student Type" name="student_type" domain="[]" context="{'group_by':'student_type'}"/>
						<filter string="Gender" name="gender" domain="[]" context="{'group_by':'gender'}"/>
                    </group>
				</search>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_pappaya_fees_head_id">
			<field name="name">Fees Head</field>
			<field name="res_model">pappaya.fees.head</field>
			<field name="type">ir.actions.act_window</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Click to add a new Fee Head.
				</p>
			</field>
		</record>

	</data>
	
	<template id="account.report_generalledger">
	    <t t-call="web.html_container">
	        <t t-set="data_report_margin_top" t-value="12"/>
	        <t t-set="data_report_header_spacing" t-value="9"/>
	        <t t-set="data_report_dpi" t-value="110"/>
	
	        <t t-call="web.internal_layout">
	            <div class="page">
	                <h2><span t-esc="res_company.name"/>: General ledger</h2>
	
	                <div class="row mt32">
	                    <div class="col-xs-4">
	                        <strong>Journals:</strong>
	                          <p t-esc="', '.join([ lt or '' for lt in print_journal ])"/>
	                    </div>
	                    <div class="col-xs-4">
	                        <strong>Display Account</strong>
	                        <p>
	                            <span t-if="data['display_account'] == 'all'">All accounts'</span>
	                            <span t-if="data['display_account'] == 'movement'">With movements</span>
	                            <span t-if="data['display_account'] == 'not_zero'">With balance not equal to zero</span>
	                        </p>
	                    </div>
	                    <div class="col-xs-4">
	                        <strong>Target Moves:</strong>
	                        <p t-if="data['target_move'] == 'all'">All Entries</p>
	                        <p t-if="data['target_move'] == 'posted'">All Posted Entries</p>
	                    </div>
	                </div>
	                <div class="row mb32">
	                    <div class="col-xs-4">
	                        <t t-if="data['date_from']"><strong>Date from :</strong> <span t-esc="data['date_from']"/><br/></t>
	                        <t t-if="data['date_to']"><strong>Date to :</strong> <span t-esc="data['date_to']"/></t>
	                    </div>
	                    <div class="col-xs-4">
	                        <!-- <strong>Sorted By:</strong>
	                        <p t-if="data['sortby'] == 'sort_date'">Date</p>
	                        <p t-if="data['sortby'] == 'sort_journal_partner'">Journal and Partner</p> -->
	                    </div>
	                </div>
	
	                <table class="table table-condensed">
	                    <thead>
	                        <tr class="text-center">
	                            <th>Date</th>
	                            <th>JRNL</th>
	                            <th>Student</th>
	                            <!-- <th>Partner</th> -->
	                            <th>Ref</th>
	                            <th>Move</th>
	                            <th>Entry Label</th>
	                            <th>Debit</th>
	                            <th>Credit</th>
	                            <th>Balance</th>
	                            <th groups="base.group_multi_currency">Currency</th>
	                        </tr>
	                    </thead>
	                    <tbody>
	                        <t t-foreach="Accounts" t-as="account">
	                            <tr style="font-weight: bold;">
	                                <td colspan="6">
	                                    <span style="color: white;" t-esc="'..'"/>
	                                    <span t-esc="account['code']"/>
	                                    <span t-esc="account['name']"/>
	                                </td>
	                                <td class="text-right">
	                                    <span t-esc="account['debit']" t-esc-options='{"widget": "monetary", "display_currency": "res_company.currency_id"}'/>
	                                </td>
	                                <td class="text-right">
	                                    <span t-esc="account['credit']" t-esc-options='{"widget": "monetary", "display_currency": "res_company.currency_id"}'/>
	                                </td>
	                                <td class="text-right">
	                                    <span t-esc="account['balance']" t-esc-options='{"widget": "monetary", "display_currency": "res_company.currency_id"}'/>
	                                </td>
	                                <td groups="base.group_multi_currency"/>
	                            </tr>
	                            <tr t-foreach="account['move_lines']" t-as="line">
	                                <td><span t-esc="line['ldate']"/></td>
	                                <td><span t-esc="line['lcode']"/></td>
	                                <td><span t-esc="line['partner_name']"/></td>
	                                <td><span t-if="line['lref']" t-esc="line['lref']"/></td>
	                                <td><span t-esc="line['move_name']"/></td>
	                                <td><span t-esc="line['lname']"/></td>
	                                <td class="text-right">
	                                    <span t-esc="line['debit']" t-esc-options='{"widget": "monetary", "display_currency": "res_company.currency_id"}'/>
	                                </td>
	                                <td class="text-right">
	                                    <span t-esc="line['credit']" t-esc-options='{"widget": "monetary", "display_currency": "res_company.currency_id"}'/>
	                                </td>
	                                <td class="text-right">
	                                    <span t-esc="line['balance']" t-esc-options='{"widget": "monetary", "display_currency": "res_company.currency_id"}'/>
	                                </td>
	                                <td class="text-right" groups="base.group_multi_currency">
	                                    <span t-esc="line['amount_currency'] if line['amount_currency'] > 0.00 else ''"/>
	                                    <span t-esc="line['currency_code'] if line['amount_currency'] > 0.00 else ''"/>
	                                </td>
	                            </tr>
	                        </t>
	                    </tbody>
	                </table>
	            </div>
	        </t>
	    </t>
	</template>

</odoo>
