<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
	
		<record id="view_pappaya_attendance_report_form" model="ir.ui.view">
			<field name="name">view.pappaya.attendance.report.form</field>
			<field name="model">pappaya.attendance.report</field>
			<field name="arch" type="xml">
				<form string="Attendance Report">
					<group>
						<group>
							<field name="branch_id" required="1" options="{'no_create':True,'no_open':True}"/>
							<field name="month_id" required="1" options="{'no_create':True,'no_open':True}"/>
							<field name="total_days" invisible="1"/>
						</group>
                        <group>
                        	<label for="date_start" string="Period"/>
	                    	 <div>
	                           <field name="date_start" class="oe_inline" readonly="1" force_save="1"/> - <field name="date_end" class="oe_inline" readonly="1" force_save="1"/>
	                     	</div>
                    	</group>
					</group>
                    <footer>
                        <button string="View" name="generate_pdf_report" class="oe_highlight" type="object"/>
                        <button string="Cancel" special="cancel" />
                    </footer>
				</form>
			</field>
		</record>	
	
        <record id="action_pappaya_attendance_report" model="ir.actions.act_window">
            <field name="name">Attendance Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">pappaya.attendance.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>	
	
	<menuitem id="menu_pappaya_action_attendance_report" parent="hr_attendance.menu_hr_attendance_root" action="action_pappaya_attendance_report" 
		sequence="100"/>
		
	<!-- Report PDF -->
		
        <template id="pappaya_hr_attendance.template_pappaya_emp_attendance_report">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="pappaya_base.report_custom_layout">
                        <div class="page">
                            <style>
                                .row1 {
                                    text-align:center;
                                    font-size:14px;
                                    padding-top:20px;
                                    padding-bottom:20px
                                    }
                                .table-condensed1 {
                                    width:100%;
                                    text-align:center;
                                    border:1px solid black;
                                    font-size:16px;
                                    }
                                .result1 td {
                                    text-align:center;
                                    border-bottom:1px solid black;
                                    font-size:14px
                                    }
                            </style>
                            
                            <div class="row">
                                <div class="col-xs-2" style="text-align:left;padding-top:35px">
                                    <img t-attf-src="/pappaya_base/static/src/img/logo.png"/>
                                </div>
                                <div class="col-xs-10" style="text-align:right;">
                                    <div style="font-weight:700;font-size:22px;text-align:center;">
                                        <strong>
                                            <span t-raw="'%s' % res_company.partner_id.name if res_company.partner_id.name else ''" />
                                        </strong>
                                    </div>
                                    <div style="font-size:15px; text-align:center">
                                        <span t-raw="'%s' % res_company.street if res_company.street else ''"/>
                                    </div>
                                    <div style="font-size:15px; text-align:center">
                                        <span t-raw="'%s' % res_company.city if res_company.city else ''" />,
                                        <span t-raw="'%s' % res_company.state_id.name if res_company.state_id else ''"/>-
                                        <span t-raw="'%s' % res_company.zip if res_company.zip else ''" />
                                    </div>
                                    <div style="font-size:15px; text-align:center">
                                        Phone:<span t-raw="'%s' % res_company.phone if res_company.phone else ''"/>,
                                        Email:<span t-raw="'%s' % res_company.email if res_company.email else ''"/>
                                    </div>
                                    <div style="font-size:14px; text-align:center;padding-bottom:20px;">
                                        <span t-raw="'%s' % res_company.website if res_company.website else ''"/>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row1">
                                <div class="col-xs-2" style="text-align:left;"/>
                                <div class="col-xs-10" style="text-align:center;">
                                    <strong>Attendance Report</strong> <br/>
                                    <b>Branch : <span t-field="o.branch_id.name"/></b> <br/>
                                    <b>Month : <span t-field="o.month_id.name"/></b> <br/>
                                    <b>Days Total : <span t-field="o.total_days"/></b>
                                </div>
                            </div>
                            
                            <table class="table-condensed1">
                            	<thead>
	                                 <tr>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>S.No</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>Employee Name</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>Employee ID</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>1</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>2</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>3</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>4</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>5</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>6</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>7</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>8</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>9</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>10</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>11</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>12</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>13</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>14</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>15</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>16</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>17</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>18</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>19</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>20</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>21</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>22</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>23</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>24</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>25</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>26</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>27</strong></td>	                                   
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>28</strong></td>	                                  
	                                     <t t-if="o.total_days > 28">
	                                     	<td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>29</strong></td>
	                                	</t>
	                                     <t t-if="o.total_days > 29">
	                                     	<td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>30</strong></td>
	                                     </t>
	                                     <t t-if="o.total_days > 30">
	                                     	<td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>31</strong></td>
	                                     </t>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>present</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>leaves</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>week off</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>holidays</strong></td>
	                                     <td style="border-right:1px solid black;border-bottom:1px solid black;"><strong>absent</strong></td>
	                                 </tr>
	                             </thead>
	                             <tbody>
	                             	<t t-foreach="o.get_data()" t-as="d">
	                             		<tr class="result1" style="page-break-inside: avoid">	                        
	                             			<td style="border-right:1px solid black;"><span t-esc="d['s_no']"/></td>
	                             			<td style="border-right:1px solid black;"><span t-esc="d['name']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['emp_id']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['1']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['2']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['3']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['4']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['5']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['6']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['7']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['8']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['9']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['10']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['11']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['12']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['13']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['14']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['15']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['16']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['17']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['18']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['19']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['20']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['21']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['22']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['23']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['24']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['25']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['26']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['27']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['28']"/></td>
											<t t-if="o.total_days > 28">
											<td style="border-right:1px solid black;"><span t-esc="d['29']"/></td>
											</t>
											<t t-if="o.total_days > 29">
											<td style="border-right:1px solid black;"><span t-esc="d['30']"/></td>
											</t>
											<t t-if="o.total_days > 30">
												<td style="border-right:1px solid black;"><span t-esc="d['31']"/></td>
											</t>
											<td style="border-right:1px solid black;"><span t-esc="d['present_days']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['leave_days']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['weekly_off']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['holiday']"/></td>
											<td style="border-right:1px solid black;"><span t-esc="d['absent']"/></td>
	                             		</tr>
	                             	</t>
	                             </tbody>
	                             	
                                    </table>
                                    <br/>
	                             	<br/>
	                             	<br/>
	                             	<br/>
	                             	<br/>
                                    <div>
                                    	<b>Legend</b>
                                    </div>
                                    <table class="table-condensed1">
                                    	<thead>
                                    		<tr class="result1">
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">PR</td>
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">Present</td>
                                    		</tr>
                                    		<tr class="result1">
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">PP</td>
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">Partially Present</td>
                                    		</tr>                                    		
                                    		<tr class="result1">
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">L</td>
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">Leave</td>
                                    		</tr>                                    		
                                    		<tr class="result1">
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">HL</td>
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">Halfday Leave</td>
                                    		</tr>
                                    		<tr class="result1">
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">WO</td>
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">Weekly Off</td>
                                    		</tr>
                                    		<tr class="result1">
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">HD</td>
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">Holiday</td>
                                    		</tr>
                                    		<tr class="result1">
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">AB</td>
                                    			<td style="border-right:1px solid black;border-bottom:1px solid black;">Absent</td>
                                    		</tr>
                                    	</thead>
                                    </table>
                                    </div>
                                    </t>
                                </t>
            </t>
        </template>		
		
		
        <report
            id="pdf_view_pappaya_attendance_report"
            model="pappaya.attendance.report"
            string="Attendance Report"
            report_type="qweb-pdf"
            name="pappaya_hr_attendance.template_pappaya_emp_attendance_report"
            file="pappaya_hr_attendance.template_pappaya_emp_attendance_report"
            attachment_use="False"
            menu="False"
        />		
		
		
        <record id="paper_pappaya_attendance_report" model="report.paperformat">
			<field name="name">European A4 - Landscape</field>
			<field name="default" eval="True" />
			<field name="format">A4</field>
			<field name="page_height">0</field>
			<field name="page_width">0</field>
			<field name="orientation">Landscape</field>
			<field name="margin_top">10</field>
			<field name="margin_bottom">20</field>
			<field name="margin_left">10</field>
			<field name="margin_right">10</field>
			<field name="header_line" eval="False"/>
			<field name="header_spacing">30</field>
			<field name="dpi">110</field>
		</record>

		<record id="pdf_view_pappaya_attendance_report" model="ir.actions.report">
			<field name="paperformat_id" ref="paper_pappaya_attendance_report"/>
		</record>
		
		
	
	</data>
</odoo>