<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
	
		<record id="view_other_allowance_and_deduction_form" model="ir.ui.view">
	          <field name="name">view.other.allowance.and.dedution.form</field>
	          <field name="model">other.allowance.and.deduction</field>
	          <field name="type">form</field>
	          <field name="arch" type="xml">
	          <form string='Other Allowance and Dedution'>
	          		<header>
	          			<button name="button_confirm" states="draft" string="Confirm" type="object" class="oe_highlight" groups="pappaya_base.hr_executives,pappaya_base.hr_operations_head,pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
						<button name="button_reset" states="done,archived" string="Reset" type="object" class="oe_highlight" groups="pappaya_base.hr_operations_head,pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
						<button name="button_archive" states="done" string="Archive" type="object" class="oe_highlight" groups="pappaya_base.hr_operations_head,pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
						<field name="state" widget="statusbar"/>						
					</header>
					<sheet>
					<group>
						<group>
							<field name="month_id" options="{'no_open': True,'no_create':True}" required="1" attrs="{'readonly':[('state','!=','draft')]}" />
							<field name="name"/>
						</group>
						<group>
                              <label for="date_from" string="Period"/>
		                     <div>
		                           <field name="date_from" class="oe_inline" required="1" readonly="1" force_save="1"/> - <field name="date_to" class="oe_inline" required="1" readonly="1" force_save="1"/>
		                     </div>
		                     <field name="salary_rule_id" domain="[('category_id.name','in', ['Allowance','Deduction'])]" options="{'no_create' : True}"/>
							 <field name="allowance_or_deduction" invisible="1"/>
                         </group>
					</group>
	          		<notebook>
		          		<page string="Allowance and Deduction Lines">
		          			<field name="other_allowance_and_deduction_line">
		          				<tree editable="bottom">
		          					<field name="employee_id" required="1"/>
		          					<field name="amount"/>
		          					<field name="state" invisible="1"/>
		          					<field name="description"/>	
		          					<field name="other_allowance_and_deduction_id" invisible="1"/>
		          				</tree>
		          			</field>
		              	</page>
		              	<page string="Change Log">
		              		<field name="other_allowance_and_deduction_log">
		          				<tree editable="bottom">
		          					<field name="user_id"/>
		          					<field name="activity_time"/>
		          					<field name="state_from"/>
		          					<field name="other_allowance_and_deduction_id" invisible="1"/>
		          				</tree>
		          			</field>
		              	</page>
	              	</notebook>
	            </sheet>
	          	</form>
			  </field>
		</record>
		
		<record id="view_other_allowance_and_deduction_tree" model="ir.ui.view">
	          <field name="name">view.other.allowance.and.deduction.tree</field>
	          <field name="model">other.allowance.and.deduction</field>
	          <field name="type">tree</field>
	          <field name="arch" type="xml">
	          	<tree string='Other Allowance and Deduction List'>
	          		<field name="date_from"/>
	          		<field name="date_to"/>
	          		<field name="salary_rule_id"/>
	       			<field name="state" string="Status"/>
	          	</tree>
			  </field>
		</record>

		<record id="view_other_allowance_and_deduction_search" model="ir.ui.view">
			<field name="name">view.other.allowance.and.deduction.search</field>
			<field name="model">other.allowance.and.deduction</field>
			<field name="priority" eval="8" />
			<field name="arch" type="xml">
				<search string="Other Allowance and Deduction List">
					<field name="salary_rule_id" />
					<field name="state" />
					<group expand="0" string="Group By...">
                        <filter name="salary_rule_id" string="Salary Rule" domain="[]" context="{'group_by':'salary_rule_id'}" />
                        <filter name="state" string="Status" domain="[]" context="{'group_by':'state'}" />
                    </group>
				</search>
			</field>
		</record>
		
	    <record id="action_other_allowance_and_deduction" model="ir.actions.act_window">
	        <field name="name">Monthly Allowance and Deduction</field>
	        <field name="res_model">other.allowance.and.deduction</field>
	        <field name="view_type">form</field>
	        <field name="view_mode">tree,form</field>
			<field name="search_view_id" ref="view_other_allowance_and_deduction_search" />
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to define Monthly Allowance and Deduction.
                </p>
            </field>
	    </record>

        <menuitem id="menu_other_allowance_and_deduction" action="action_other_allowance_and_deduction" name="Monthly allowance and deduction" parent="hr_payroll.menu_hr_payroll_root"
				  sequence="15" groups="pappaya_base.hr_executives,pappaya_base.hr_operations_head,pappaya_base.hr_cpo,pappaya_base.payroll_operation,pappaya_base.payroll_head"/>
    
    

    </data>
</odoo>
